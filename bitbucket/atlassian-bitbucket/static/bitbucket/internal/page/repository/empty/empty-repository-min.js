define("bitbucket/internal/page/repository/emptyRepository","aui jquery bitbucket/util/state bitbucket/internal/util/ajax bitbucket/internal/util/events exports".split(" "),function(h,c,e,k,d,l){function g(a,b){c("#empty-repository-instructions").html(bitbucket.internal.page.emptyRepositoryInstructions({repository:e.getRepository(),cloneUrl:b,currentUser:e.getCurrentUser()}))}d.on("bitbucket.internal.feature.repository.clone.protocol.initial",g);d.on("bitbucket.internal.feature.repository.clone.protocol.changed",
g);l.onReady=function(a){c("#empty-repository-instructions:empty").length&&g(null,e.getRepository().cloneUrl);if(a){a=window.location.href.lastIndexOf("/browse");a=-1===a?window.location.href:window.location.href.substr(0,a);var b=c('\x3cdiv id\x3d"initialising" /\x3e'),d=c("\x3ch2\x3e\x3c/h2\x3e"),f=c("#content .content-body");d.text(h.I18n.getText("bitbucket.web.repository.initialising"));f.css("opacity",.2);d.appendTo(b);b.appendTo(f.parent());b.spin("large");k.poll({url:a,tick:function(a){a=a&&
a.state;if("AVAILABLE"===a)return!0;if("INITIALISATION_FAILED"===a)return!1}}).always(function(){b.spinStop();b.remove();f.fadeTo("fast",1)}).fail(function(a,b,d,e){f.empty().css("padding","16px");200===a.status&&c(aui.message.error({content:h.escapeHtml(e.statusMessage)})).appendTo(f)})}}});require("bitbucket/internal/page/repository/emptyRepository");