define("bitbucket/internal/page/project/settings","aui jquery bitbucket/util/navbuilder bitbucket/internal/feature/project/project-avatar-picker bitbucket/internal/model/page-state bitbucket/internal/util/ajax bitbucket/internal/util/notifications bitbucket/internal/widget/confirm-dialog exports".split(" "),function(e,d,k,m,f,n,p,q,b){b.initDeleteButton=function(r){function g(a){d(".delete-confirm-button").prop("disabled",!a).toggleClass("disabled",!a)}function b(){c.append(bitbucket.internal.project.deleteDialog({project:f.getProject().toJSON()}));
g(!0)}var c=d("\x3cdiv class\x3d'container'\x3e\x3c/div\x3e"),h,l=new q({id:"delete-project-dialog",titleText:e.I18n.getText("bitbucket.web.project.delete"),titleClass:"warning-header",confirmButtonClass:"delete-confirm-button",panelContent:c,submitText:e.I18n.getText("bitbucket.web.button.delete")},{type:"DELETE"});l.attachTo(r,function(){c.empty();h=d("\x3cdiv class\x3d'spinner'\x3e\x3c/div\x3e").appendTo(c);g(!1);h.spin("large");n.rest({url:k.rest().currentProject().allRepos().build(),statusCode:{"*":function(){return!1}}}).done(function(a){a&&
a.size?(c.append(bitbucket.internal.project.deleteDisabledDialog({project:f.getProject().toJSON()})),g(!1)):b()}).fail(function(){b()}).always(function(){h.spinStop().remove()})});l.addConfirmListener(function(a){a.done(function(a){p.addFlash(e.I18n.getText("bitbucket.web.project.deleted",f.getProject().getName()));window.location=k.allProjects().build()})})};b.onReady=function(){var b={name:"atl_token",value:d(".project-settings input[name\x3datl_token]").val()};new m(".avatar-picker-field",{xsrfToken:b})}});