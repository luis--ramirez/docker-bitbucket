define("bitbucket/internal/page/project/permissions","jquery bitbucket/util/navbuilder bitbucket/internal/feature/permission/permission-table bitbucket/internal/page/project/permissions/project-permissions-model bitbucket/internal/widget/submit-spinner exports".split(" "),function(d,n,p,q,m,h){h.onReady=function(h){function e(a){var b='input:radio[name\x3d"licensed-users-permissions"]';a&&(b+='[value\x3d"'+a+'"]');return d(b)}var k=e("none"),l=d("#public-access-allowed"),g,c,f=new q({grantedDefaultPermission:d("#licensed-users-permissions").attr("data-granted-permission"),
publicAccess:!!l.prop("checked")});f.on("change:grantedDefaultPermission",function(a){e(a.getGrantedDefaultPermission()).prop("checked",!0)});f.on("change:publicAccess",function(a){e(a.getEffectiveDefaultPermission()).prop("checked",!0);k.prop("disabled",a.getPublicAccess());l.prop("checked",a.getPublicAccess())});e().each(function(){var a,b;d(this).click(function(){a||(a=new m(d(this).next("label")));b&&b.abort();a.show();var c=e().filter(":checked").val();b=f.saveDefaultPermission(c);b.always(function(){a.hide();
b=null})})});l.click(function(){g||(g=new m(d(this).next("label")));c&&c.abort();g.show();c=f.savePublicAccess(this.checked);c.always(function(){g.hide();c=null})});k.next("label").tooltip({gravity:"sw",title:function(){return f.getPublicAccess()?k.parent().attr("data-disabled-title"):""}});p.initialise(n.currentProject().permissions(),h,"PROJECT_ADMIN")}});