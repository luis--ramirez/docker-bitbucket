define("bitbucket/internal/page/commits","bitbucket/util/navbuilder bitbucket/internal/feature/commits/commits-table bitbucket/internal/model/revision-reference bitbucket/internal/util/events bitbucket/internal/util/history exports".split(" "),function(e,k,f,a,g,l){function h(a){a=a||c;var b=e.currentRepo().commits();a.isDefault()||(b=b.withParams({until:a.getId()}));return b}function m(){d.bindKeyboardShortcuts();a.on("bitbucket.internal.widget.keyboard-shortcuts.register-contexts",function(a){a.enableContext("commits")});
var c=function(){a.trigger("bitbucket.internal.keyboard.shortcuts.disableOpenItemHandler")},b=function(){a.trigger("bitbucket.internal.keyboard.shortcuts.enableOpenItemHandler")};a.on("bitbucket.internal.widget.branchselector.dialogShown",c);a.on("bitbucket.internal.widget.branchselector.dialogHidden",b);a.on("bitbucket.internal.layout.branch.actions.dropdownShown",c);a.on("bitbucket.internal.layout.branch.actions.dropdownHidden",b)}var c,d;l.onReady=function(e){c=new f(e);d=new k(h);d.init();a.on("bitbucket.internal.layout.branch.revisionRefChanged",
function(a){c!==a&&g.pushState(a.toJSON(),null,h(a).build())});a.on("bitbucket.internal.history.changestate",function(b){if(b=b.state)c=new f(b),d.update(),a.trigger("bitbucket.internal.page.commits.revisionRefChanged",null,c)});m();g.initialState(c.toJSON())}});