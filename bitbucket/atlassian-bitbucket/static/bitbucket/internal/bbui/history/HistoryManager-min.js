define("bitbucket/internal/bbui/history/HistoryManager",["module","exports","internal/util/navigator","../widget/widget"],function(g,d,f,h){Object.defineProperty(d,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(f);f=function(d){function e(a){babelHelpers.classCallCheck(this,e);var b=babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this));b._localWindow=a||window;b.titleSuffix="";b._init();return b}babelHelpers.inherits(e,d);babelHelpers.createClass(e,[{key:"pushState",
value:function(a,b,c){this._localWindow.history.pushState(a,b||"",c||"");this._maybeSetTitle(b);this.trigger("changestate",{state:a})}},{key:"replaceState",value:function(a,b,c){this._localWindow.history.replaceState(a,b||"",c||"");this._maybeSetTitle(b);this.trigger("changestate",{state:a})}},{key:"state",value:function(){return this._localWindow.history.state}},{key:"initialState",value:function(a){return this._localWindow.history.replaceState(a,"",this._localWindow.location.href)}},{key:"setTitleSuffix",
value:function(a){this.titleSuffix=a||""}},{key:"_init",value:function(){var a=this,b=k.default.isSafari(),c=function(c){!c||b&&null===c.state||(a.trigger("popstate",c),a.trigger("changestate",c));b&&(b=!1)};this._localWindow.addEventListener("popstate",c);this._addDestroyable(function(){a._localWindow.removeEventListener("popstate",c)})}},{key:"_maybeSetTitle",value:function(a){a&&(this._localWindow.document.title=a+this.titleSuffix)}}]);return e}(babelHelpers.interopRequireDefault(h).default);d.default=
f;g.exports=d["default"]});