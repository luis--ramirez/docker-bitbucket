define("bitbucket/internal/bbui/data-provider/data-provider","module exports jquery ../javascript-errors/javascript-errors ../json-validation/json-validation ../widget/widget".split(" "),function(g,b,e,d,h,k){Object.defineProperty(b,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(e),l=babelHelpers.interopRequireDefault(h);e=function(b){function c(){var a=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],b=1>=arguments.length||void 0===arguments[1]?null:arguments[1];babelHelpers.classCallCheck(this,
c);a=babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(c).call(this,a));a.initialData=b;a.options.jsonDescriptor&&(a._validate=(0,l.default)(a.options.jsonDescriptor));return a}babelHelpers.inherits(c,b);babelHelpers.createClass(c,[{key:"reset",value:function(){this.abort();this.currentData=null;delete this.initialData;this.trigger("reset")}},{key:"abort",value:function(){this._requestPromise&&(this._requestPromise.abort(),this._requestPromise=null,this.trigger("abort"))}},{key:"fetch",
value:function(){var a=this,b=0>=arguments.length||void 0===arguments[0]?this.url:arguments[0];this.abort();this.initialData&&(this.currentData=this.transform(this.initialData),delete this.initialData);if(this.currentData)return f.default.Deferred().resolve(this.currentData);this.trigger("data-requested");this._requestPromise=this._fetch(b);if(!this._requestPromise.abort)throw Error("no abort method on DataProvider#_requestPromise.");return this._requestPromise.then(this.transform,function(){return f.default.Deferred().reject(a.errorTransform.apply(a,
arguments))}).done(function(b){a.trigger("data-loaded",b);a.currentData=b}).fail(function(b){a.trigger("data-request-failed",b)}).always(function(){a._requestPromise=null})}},{key:"_fetch",value:function(){throw new d.NotImplementedError;}},{key:"transform",value:function(){var a=this._transform.apply(this,arguments);this._validate(a);return a}},{key:"_transform",value:function(){throw new d.NotImplementedError;}},{key:"_validate",value:function(a){throw new d.NotImplementedError;}},{key:"errorTransform",
value:function(){return this._errorTransform.apply(this,arguments)}},{key:"_errorTransform",value:function(){throw new d.NotImplementedError;}},{key:"isFetching",get:function(){return!!this._requestPromise}}]);return c}(babelHelpers.interopRequireDefault(k).default);b.default=e;g.exports=b["default"]});