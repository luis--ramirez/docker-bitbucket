define("bitbucket/internal/bbui/search/internal/search-results-table","module exports jquery lodash ../../paged-table/legacy ./analytics ../../avatars/avatars".split(" "),function(k,a,g,l,m,h){Object.defineProperty(a,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(g),n=babelHelpers.interopRequireDefault(l);g=babelHelpers.interopRequireDefault(m);var p=babelHelpers.interopRequireDefault(h);h=function(a){function c(f,a){babelHelpers.classCallCheck(this,c);var b=babelHelpers.possibleConstructorReturn(this,
Object.getPrototypeOf(c).call(this,n.default.extend({tableEl:f,autoLoad:"next",tableMessageClass:"message",rowSelector:".search-result",allFetchedMessageHtml:function(){return bitbucket.internal.component.search.allResults({loaded:b.$table.find(b.options.rowSelector).length})},getNoneFoundMessageHtml:function(){return bitbucket.internal.component.search.noResults({query:a.dataProvider.options.query,includeAdvancedHelp:!0})},spinnerSize:"medium"},a)));b._addDestroyable(p.default.bindTableAnalytics((0,
e.default)(f),a.scope.project,a.scope.repository));b.$table.on("click",".context-toggler",function(d){d.preventDefault();d=(0,e.default)(d.currentTarget).closest(b.options.rowSelector);var a=d.hasClass("truncated");d.toggleClass("truncated",!a).toggleClass("expanded",a);a||(0,e.default)(window).scrollTop(d.offset().top)});return b}babelHelpers.inherits(c,a);babelHelpers.createClass(c,[{key:"handleNewRows",value:function(a,c){var b=a.map(function(a){var b=a.hitContexts.length-1+a.hitContexts.reduce(function(a,
b){return a+b.length},0);return bitbucket.internal.component.search.codeResult({result:a,isTruncated:10<b})});this.$table.append(b);this.$table.find(".new-result").each(function(a,b){var c=(0,e.default)(b).find("code em").first();if(1===c.length){var f=c.closest("code");f.scrollLeft(c.offset().left-Math.floor(f.width()/2))}}).removeClass("new-result");(0,e.default)(".code-search-filename",this.$table).tooltip({gravity:"nw"})}},{key:"handleErrors",value:function(a){console.error(a)}}]);return c}(g.default);
a.default=h;k.exports=a["default"]});