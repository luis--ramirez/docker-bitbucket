define("bitbucket/internal/bbui/inbox/inbox","module exports react jquery lodash ../aui-react/spinner ../models/models ../paged-table/paged-table ../pull-request-table/components/author-avatar ../pull-request-table/components/comments ../pull-request-table/components/pull-request-row ../pull-request-table/components/reviewers ../pull-request-table/components/tasks ../pull-request-table/components/web-section ../utils/pull-request-unique-id ./components/summary".split(" "),function(u,e,c,h,v,w,x,y,
z,A,B,C,D,g,E,F){Object.defineProperty(e,"__esModule",{value:!0});var a=babelHelpers.interopRequireDefault(c),k=babelHelpers.interopRequireDefault(h),G=babelHelpers.interopRequireDefault(v),H=babelHelpers.interopRequireDefault(w),I=babelHelpers.interopRequireDefault(x),l=babelHelpers.interopRequireDefault(y),J=babelHelpers.interopRequireDefault(z),m=babelHelpers.interopRequireDefault(A),n=babelHelpers.interopRequireDefault(B),p=babelHelpers.interopRequireDefault(C),q=babelHelpers.interopRequireDefault(D),
r=babelHelpers.interopRequireDefault(E),t=babelHelpers.interopRequireDefault(F);h=function(e){function f(){babelHelpers.classCallCheck(this,f);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(f).apply(this,arguments))}babelHelpers.inherits(f,e);babelHelpers.createClass(f,[{key:"componentDidMount",value:function(){(0,k.default)(document).on("click",".inbox-table-wrapper .tabs-menu a",this.changeTabs);this.props.created.onMoreItemsRequested();this.props.reviewing.onMoreItemsRequested()}},
{key:"componentWillUnmount",value:function(){(0,k.default)(document).off("click",".inbox-table-wrapper .tabs-menu a",this.changeTabs)}},{key:"changeTabs",value:function(a){AJS.tabs.change((0,k.default)(a.currentTarget),a);a.preventDefault()}},{key:"isPrReviewed",value:function(a,b){return G.default.some(a,function(a){return a.user.name===b.name&&a.state===I.default.ApprovalState.NEEDS_WORK})}},{key:"render",value:function(){var c=this,b=this.props,e=a.default.createElement("div",{className:"empty-inbox-message"},
a.default.createElement("span",{className:"aui-icon aui-icon-large aui-iconfont-workbox-empty"},AJS.I18n.getText("bitbucket.component.inbox.empty.description")),a.default.createElement("h3",null,AJS.I18n.getText("bitbucket.component.inbox.empty.title"))),f=b.reviewing.pullRequests.length||b.reviewing.loading?a.default.createElement(l.default,babelHelpers.extends({},b.reviewing,{className:"pull-requests-table",allFetchedMessage:AJS.I18n.getText("bitbucket.pull.request.all.fetched"),items:b.reviewing.pullRequests,
onMoreItemsRequested:b.reviewing.onMoreItemsRequested,scrollElement:".inbox-table-wrapper",row:function(e){var f=e.focused,d=e.item;return a.default.createElement(n.default,{key:(0,r.default)(d),focused:f,prNeedsWork:c.isPrReviewed(d.reviewers,b.currentUser)},a.default.createElement(J.default,{author:d.author}),a.default.createElement(t.default,{pullRequest:d}),g.beforeSections.map(function(b){return a.default.createElement(g.WebSectionCell,{key:b.key+"::before",where:"before",webSection:b,pullRequest:d})}),
a.default.createElement(p.default,{currentUser:b.currentUser,currentUserAvatarSize:"medium",dialogReviewersAsTooltip:!0,pullRequest:d}),a.default.createElement(m.default,{pullRequest:d}),a.default.createElement(q.default,{pullRequest:d}))}})):e,e=b.created.pullRequests.length||b.created.loading?a.default.createElement(l.default,babelHelpers.extends({},b.created,{className:"pull-requests-table",allFetchedMessage:AJS.I18n.getText("bitbucket.pull.request.all.fetched"),items:b.created.pullRequests,onMoreItemsRequested:b.created.onMoreItemsRequested,
scrollElement:".inbox-table-wrapper",row:function(b){var c=b.focused,d=b.item;return a.default.createElement(n.default,{key:(0,r.default)(d),focused:c},a.default.createElement(t.default,{pullRequest:d}),g.beforeSections.map(function(b){return a.default.createElement(g.WebSectionCell,{key:b.key+"::before",where:"before",webSection:b,pullRequest:d})}),a.default.createElement(p.default,{pullRequest:d,dialogReviewersAsTooltip:!0}),a.default.createElement(m.default,{pullRequest:d}),a.default.createElement(q.default,
{pullRequest:d}))}})):e;return b.reviewing.pullRequests.length||b.created.pullRequests.length||!b.reviewing.loading&&!b.created.loading?a.default.createElement("div",{id:"inbox-wapper"},a.default.createElement("h2",null,AJS.I18n.getText("bitbucket.component.inbox.title")),a.default.createElement("div",{className:"inbox-table-wrapper aui-tabs horizontal-tabs"},a.default.createElement("ul",{className:"tabs-menu"},a.default.createElement("li",{className:"active-tab inbox-reviewer-tab menu-item"},a.default.createElement("a",
{href:"#inbox-pull-request-reviewer"},AJS.I18n.getText("bitbucket.component.inbox.reviewing"))),a.default.createElement("li",{className:"inbox-created-tab menu-item"},a.default.createElement("a",{href:"#inbox-pull-request-created"},AJS.I18n.getText("bitbucket.component.inbox.created")))),a.default.createElement("div",{id:"inbox-pull-request-reviewer",className:"tabs-pane active-pane"},f),a.default.createElement("div",{id:"inbox-pull-request-created",className:"tabs-pane"},e))):a.default.createElement("div",
{className:"inbox-spinner-padding"},a.default.createElement(H.default,null))}}],[{key:"propTypes",get:function(){return{created:c.PropTypes.shape({allFetched:c.PropTypes.bool.isRequired,loading:c.PropTypes.bool.isRequired,onMoreItemsRequested:c.PropTypes.func.isRequired,pullRequests:c.PropTypes.array.isRequired}).isRequired,currentUser:c.PropTypes.object.isRequired,reviewing:c.PropTypes.shape({allFetched:c.PropTypes.bool.isRequired,loading:c.PropTypes.bool.isRequired,onMoreItemsRequested:c.PropTypes.func.isRequired,
pullRequests:c.PropTypes.array.isRequired}).isRequired}}}]);return f}(c.Component);e.default=h;u.exports=e["default"]});