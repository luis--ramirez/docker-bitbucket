define("bitbucket/internal/bbui/pull-request-header/components/pull-request-more","module exports react classnames jquery lodash bitbucket/internal/impl/web-fragments ../../aui-react/component ../../models/models".split(" "),function(g,e,a,f,h,n,p,q,l){Object.defineProperty(e,"__esModule",{value:!0});var b=babelHelpers.interopRequireDefault(a),r=babelHelpers.interopRequireDefault(f),c=babelHelpers.interopRequireDefault(h),m=babelHelpers.interopRequireDefault(n),k=babelHelpers.interopRequireDefault(p),
t=babelHelpers.interopRequireDefault(q);f={onMoreAction:a.PropTypes.func.isRequired,isWatching:a.PropTypes.bool.isRequired,conditions:a.PropTypes.objectOf(a.PropTypes.bool).isRequired,pullRequest:a.PropTypes.object.isRequired};a=function(a){function d(){babelHelpers.classCallCheck(this,d);var b=babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(d).call(this));b.dropdownIsVisible=!1;b.throttledTriggerHideOnScroll=m.default.throttle(function(){this.dropdownIsVisible&&(0,c.default)(".pull-request-more-trigger").trigger("aui-button-invoke")}.bind(b),
50);return b}babelHelpers.inherits(d,a);babelHelpers.createClass(d,[{key:"componentDidMount",value:function(){var b=this;(0,c.default)("#pull-request-header-more").on({"aui-dropdown2-show":function(){b.dropdownIsVisible=!0},"aui-dropdown2-hide":function(a){(0,c.default)(a.target).hide();b.dropdownIsVisible=!1}});(0,c.default)(document).on("scroll",this.throttledTriggerHideOnScroll)}},{key:"componentWillUnmount",value:function(){(0,c.default)("#pull-request-header-more").off("aui-dropdown2-hide");
(0,c.default)(document).off("scroll",this.throttledTriggerHideOnScroll)}},{key:"render",value:function(){var a=this,c=void 0,d=void 0,e=this.props.pullRequest.state===l.PullRequestState.OPEN,f=this.props.pullRequest.state===l.PullRequestState.MERGED,g=k.default.getWebItems("bitbucket.pullrequest.action",{pullRequest:this.props.pullRequest}),h=m.default.flatten(k.default.getWebSections("bitbucket.internal.pullrequest.toolbar.deprecated").map(function(b){return k.default.getWebItems("bitbucket.internal.pullrequest.toolbar.deprecated/"+
b.key)}));this.props.conditions.canEdit&&!f&&(c=b.default.createElement("li",null,b.default.createElement("button",{className:"aui-button aui-button-link",role:"menuitem","data-action":"edit"},AJS.I18n.getText("bitbucket.component.pull.request.edit"))));this.props.conditions.canDecline&&e&&(d=b.default.createElement("li",null,b.default.createElement("button",{className:"aui-button aui-button-link",role:"menuitem","data-action":"decline"},AJS.I18n.getText("bitbucket.component.pull.request.decline"))));
return b.default.createElement("div",null,b.default.createElement("button",{className:"pull-request-more-trigger aui-button aui-button-subtle aui-dropdown2-trigger aui-dropdown2-trigger-arrowless","aria-haspopup":"true","aria-owns":"pull-request-header-more"},b.default.createElement("span",{className:"aui-icon aui-icon-small aui-iconfont-more"},AJS.I18n.getText("bitbucket.component.pull.request.more"))),b.default.createElement(t.default,{id:"pull-request-header-more",markup:'\x3cdiv class\x3d"aui-style-default aui-dropdown2"\x3e\x3c/div\x3e',
wrapperClass:"aui-dropdown2-section"},b.default.createElement("ul",{className:"aui-list-truncate",onClick:function(b){return a.props.onMoreAction(b.target.dataset.action)}},c,d,b.default.createElement("li",null,b.default.createElement("button",{className:"aui-button aui-button-link",role:"menuitem","data-action":"watch"},this.props.isWatching?AJS.I18n.getText("bitbucket.component.pull.request.unwatch"):AJS.I18n.getText("bitbucket.component.pull.request.watch"))),g.concat(h).map(function(a){return b.default.createElement("li",
{key:a.completeModuleKey||a.key},a.url?b.default.createElement("a",{href:a.url,className:a.cssClass,id:a.id,title:a.tooltip},a.text):b.default.createElement("button",{className:(0,r.default)("aui-button aui-button-link",a.cssClass),role:"menuitem",id:a.id,title:a.tooltip},a.text))}))))}}]);return d}(a.Component);a.propTypes=f;e.default=a;g.exports=e["default"]});