define("bitbucket/internal/bbui/search-common/transformer",["exports","lodash","bitbucket/internal/impl/search-urls"],function(b,d,e){Object.defineProperty(b,"__esModule",{value:!0});b.transformCodeResult=b.transformRepositoryResult=void 0;var f=babelHelpers.interopRequireDefault(e),g=/<\/?em>/,h=b.transformRepositoryResult=function(a){(0,d.has)(a,"avatarUrl")&&(a.avatar_url=a.avatarUrl);(0,d.has)(a,"project.avatarUrl")&&(a.project.avatar_url=a.project.avatarUrl);return a};b.transformCodeResult=function(a){a.fileParts=
a.file.split("/");a.filename=a.fileParts.slice(-1);a.firstLineNumber=(0,d.get)(a,"hitContexts.0.0",-1);var b=(0,d.flatten)(a.hitContexts.map(function(a){return a.filter(function(a){return 0!==a.line&&g.test(a.text)}).map(function(a){return a.line})})).reduce(function(a,b){var c=babelHelpers.slicedToArray(a,2),d=c[0],c=c[1];b===d+1?Array.isArray(c[c.length-1])?c[c.length-1].push(b):(c.pop(),c.push([d,b])):c.push(b);return[b,c]},[-1,[]])[1].map(function(a){return Array.isArray(a)?a[0]+"-"+a[a.length-
1]:a}).join(",");a.fileUrl=f.default.fileUrl(a.repository,a.file,b);a.repository=h(a.repository);return a}});