define("bitbucket/internal/bbui/reviewer-avatar-list/reviewer-avatar-list","module exports react classnames lodash ../aui-react/inline-dialog ../models/models ../reviewer-avatar/reviewer-avatar ../self-reviewer/self-reviewer".split(" "),function(q,f,a,r,t,l,u,v,w){function x(b){return b.slice().sort(function(b,a){return m[b.state]-m[a.state]||b.user.display_name.localeCompare(a.user.display_name)})}Object.defineProperty(f,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(a),n=babelHelpers.interopRequireDefault(r),
y=babelHelpers.interopRequireDefault(t),z=babelHelpers.interopRequireDefault(l),h=babelHelpers.interopRequireDefault(u),p=babelHelpers.interopRequireDefault(v),A=babelHelpers.interopRequireDefault(w),d;a={avatarSize:a.PropTypes.string,currentUserAsReviewer:a.PropTypes.object,currentUserAvatarSize:a.PropTypes.string,dialogReviewersAsTooltip:a.PropTypes.bool,isWatching:a.PropTypes.bool,maxOpen:a.PropTypes.number,menuId:a.PropTypes.string.isRequired,onSelfClick:a.PropTypes.func,permissionToReview:a.PropTypes.bool.isRequired,
pullRequestIsOpen:a.PropTypes.bool.isRequired,reverse:a.PropTypes.bool,reviewers:a.PropTypes.array.isRequired,triggerClass:a.PropTypes.string};var m={APPROVED:1,NEEDS_WORK:2,UNAPPROVED:3},B=(d={},babelHelpers.defineProperty(d,h.default.ApprovalState.APPROVED,AJS.I18n.getText("bitbucket.component.avatar.badge.approved")),babelHelpers.defineProperty(d,h.default.ApprovalState.NEEDS_WORK,AJS.I18n.getText("bitbucket.component.avatar.badge.needs.work")),d);d=function(b){var a=x(b.reviewers),c=b.currentUserAsReviewer?
y.default.findIndex(a,function(a){return a.user.name===(b.currentUserAsReviewer.name||b.currentUserAsReviewer.user.name)}):-1,d=b.permissionToReview&&b.pullRequestIsOpen,f=d?b.maxOpen-1:b.maxOpen;-1<c&&(c=a.splice(c,1)[0],d&&!b.currentUserAvatarSize||a.unshift(c));var k=void 0,c=void 0;a.length>f?(k=a.slice(0,f-1),c=a.slice(f-1)):(k=a,c=[]);a=k.map(function(a){return e.default.createElement(p.default,{reviewer:a,key:a.user.name,avatarSize:b.currentUserAsReviewer&&b.currentUserAvatarSize&&a.user.name===
b.currentUserAsReviewer.name?b.currentUserAvatarSize:"small"})}).slice();d&&a.unshift(e.default.createElement(A.default,{removeSelfModalId:"remove-self-modal",currentUserAsReviewer:b.currentUserAsReviewer,isWatching:b.isWatching,key:"self_reviewer",onSelfClick:b.onSelfClick}));if(c.length)if(b.dialogReviewersAsTooltip){var g="";c.map(function(a,b,c){g+=a.user.display_name;a.state!==h.default.ApprovalState.UNAPPROVED&&(g+=" ("+B[a.state]+")");b+1<c.length&&(g+="\x3cbr\x3e")});a.push(e.default.createElement("button",
{className:"overflow-reviewers-trigger overflow-reviewers-tooltip aui-button aui-button-subtle",key:"overflow-reviewers-tooltip",title:g,ref:function(a){return AJS.$(a).tooltip({html:!0})}},"+",c.length))}else a.push(e.default.createElement(l.InlineDialogTrigger,{key:"trigger",dialogId:b.menuId,className:(0,n.default)("aui-button-subtle overflow-reviewers-trigger",b.triggerClass)},"+",c.length)),a.push(e.default.createElement(z.default,{key:"dialog",id:b.menuId,className:"overflow-reviewers",alignment:b.reverse?
"left top":"bottom right"},e.default.createElement("div",{className:"avatar-dropdown"},e.default.createElement("ul",{className:"aui-list-truncate"},c.map(function(a){return e.default.createElement("li",{key:a.user.name},e.default.createElement(p.default,{reviewer:a,tooltip:!1,nameOnly:!0,withName:!0}))})))));return e.default.createElement("div",{className:(0,n.default)("reviewer-avatar-list",{reviewing:b.currentUserAsReviewer,reversed:b.reverse})},b.reverse?a.reverse():a)};d.propTypes=a;f.default=
d;q.exports=f["default"]});