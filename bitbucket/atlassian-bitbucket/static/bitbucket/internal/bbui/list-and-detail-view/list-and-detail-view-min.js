define("bitbucket/internal/bbui/list-and-detail-view/list-and-detail-view",["module","exports","jquery","lodash","../widget/widget"],function(k,g,h,l,d){Object.defineProperty(g,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(h);h=babelHelpers.interopRequireDefault(l);d=function(d){function e(b,c){babelHelpers.classCallCheck(this,e);var a=babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this,c));a.keycodes={j:74,k:75};a.$el=(0,f.default)(b);a.$el.html(bitbucket.internal.component.listAndDetailView.main({listContent:c.listContent||
"",detailContent:c.detailContent||""}));a.$listView=a.$el.find(".list-view");a.$detailView=a.$el.find(".detail-view");a.selectHandler=c.selectHandler;a.bindShortcuts();a.$listView.on("click",a.options.listItemTag,a._itemClickHandler);a._maybeSelectFirst();return a}babelHelpers.inherits(e,d);babelHelpers.createClass(e,[{key:"destroy",value:function(){babelHelpers.get(Object.getPrototypeOf(e.prototype),"destroy",this).call(this);this.unbindShortcuts();this.$el.empty()}},{key:"_itemClickHandler",value:function(b){var c=
this.options.selectedClass;this.$listView.find("li."+c).removeClass(c);c=(0,f.default)(b.currentTarget).addClass(c);this.selectHandler(c,this.$listView,this.$detailView,b)}},{key:"_maybeSelectFirst",value:function(){this.options.selectFirstOnInit&&this.$listView.find(this.options.listItemTag+":first").click()}},{key:"_shortcutHandler",value:function(b){var c=this.$listView.find(this.options.listItemTag+"."+this.options.selectedClass),a=void 0;if(b.which===this.keycodes.j)a=c.next(this.options.listItemTag);
else if(b.which===this.keycodes.k)a=c.prev(this.options.listItemTag);else return;a.click().find("a").focus().blur()}},{key:"bindShortcuts",value:function(){(0,f.default)(document).on("keydown",this._shortcutHandler)}},{key:"unbindShortcuts",value:function(){(0,f.default)(document).off("keydown",this._shortcutHandler)}},{key:"removeItem",value:function(b,c){var a=f.default.Deferred();b.addClass("offScreen").one("transitionend",function(){b.remove();a.resolve()});b.next(c).length?b.next(c).click():
b.prev(c).length?b.prev(c).click():this.$detailView.empty();return a.promise()}},{key:"addItem",value:function(b,c,a){b.addClass("offScreen");c?b.insertBefore(c):b.appendTo(this.$listView);b.offset();b.removeClass("offScreen");a&&b.click()}}]);return e}(babelHelpers.interopRequireDefault(d).default);g.default=d;d.defaults={selectedClass:"selected-item",selectFirstOnInit:!1,listItemTag:"li",selectHandler:h.default.noop};k.exports=g["default"]});