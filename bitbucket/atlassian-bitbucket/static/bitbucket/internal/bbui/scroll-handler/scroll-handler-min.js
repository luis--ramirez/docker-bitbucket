define("bitbucket/internal/bbui/scroll-handler/scroll-handler",["module","exports","jquery","react"],function(k,g,e,c){Object.defineProperty(g,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(e);e=babelHelpers.interopRequireDefault(c);var h=window.document.documentElement;e=function(e){function f(){babelHelpers.classCallCheck(this,f);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(f).apply(this,arguments))}babelHelpers.inherits(f,e);babelHelpers.createClass(f,
[{key:"componentDidMount",value:function(){this.updateListeners(null,this.props.scrollElement)}},{key:"componentDidUpdate",value:function(a){this.updateListeners(a.scrollElement,this.props.scrollElement)}},{key:"componentWillUnmount",value:function(){this.updateListeners(this.props.scrollElement,null)}},{key:"scrollCallback",value:function(a){if(!this.props.suspend&&(a=(0,d.default)(a),this._scrollingWindow||!a.is(":hidden"))){a=a.scrollTop();var b=this._getPaneHeight(),c=this._getContentHeight();
if(b+a+1>=c-(this.props.bufferPx|0))this.props.onScrollToBottom()}}},{key:"updateListeners",value:function(a,b){a=(0,d.default)(a)[0];b=(0,d.default)(b)[0];a!==b&&(a&&((0,d.default)(a).off("scroll",this._scrollCallback),(0,d.default)(window).off("resize",this._scrollCallback)),b&&(this._scrollCallback=this.scrollCallback.bind(this,b),this._getPaneHeight=(this._scrollingWindow=d.default.isWindow(b))?function(){return h.clientHeight}:function(){return b.clientHeight},this._getContentHeight=this._scrollingWindow?
function(){return h.scrollHeight}:function(){return b.scrollHeight},(0,d.default)(b).on("scroll",this._scrollCallback),(0,d.default)(window).on("resize",this._scrollCallback)))}},{key:"render",value:function(){return this.props.children}}],[{key:"propTypes",get:function(){return{bufferPx:c.PropTypes.number,children:c.PropTypes.element.isRequired,onScrollToBottom:c.PropTypes.func.isRequired,scrollElement:c.PropTypes.oneOfType([c.PropTypes.node,c.PropTypes.oneOf([window])]),suspend:c.PropTypes.bool}}},
{key:"defaultProps",get:function(){return{scrollElement:window}}}]);return f}(e.default.Component);g.default=e;k.exports=g["default"]});