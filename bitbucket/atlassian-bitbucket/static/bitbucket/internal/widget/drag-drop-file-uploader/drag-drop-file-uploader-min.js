define("bitbucket/internal/widget/drag-drop-file-uploader","jquery lodash bitbucket/internal/util/events bitbucket/internal/widget/client-file-handlers/client-file-uploader bitbucket/internal/widget/drag-drop-file-target bitbucket/internal/widget/faux-upload-field bitbucket/internal/widget/paste-image-target".split(" "),function(d,f,e,c,g,h,k){function a(c,d){if(!a.isSupported())throw Error("DragDropUploader requires ClientFileUploader support");this.init.apply(this,arguments)}a.typeFilters=c.typeFilters;
a.isSupported=c.isSupported;e.addLocalEventMixin(a.prototype);a.prototype.defaults={url:null,fieldName:"file",uploadButton:void 0,fileTypeFilter:void 0,fileCountLimit:void 0,fileSizeLimit:void 0,pasteUpload:!0};a.prototype.init=function(a,e){this.$target=d(a);var b=f.pick(c.prototype.defaults,"fileTypeFilter","fileCountLimit","fileSizeLimit");this.options=d.extend({},this.defaults,b,e);this._destroyables=[];b=new c({url:this.options.url,fieldName:this.options.fieldName});this._destroyables.push(this.retriggerFrom(b,
"filesSelected","validFiles","invalidFiles","uploadStarted"));this._destroyables.push(b);this._destroyables.push(new g(this.$target,{clientFileHandler:b}));this.options.uploadButton&&this._destroyables.push(new h(d(this.options.uploadButton),{clientFileHandler:b,allowMultiple:1<this.options.fileCountLimit}));this.options.pasteUpload&&this._destroyables.push(new k(this.$target,b))};a.prototype.destroy=function(){f.invoke(this._destroyables,"destroy")};return a});