define("bitbucket/internal/widget/updating-section",["jquery","lodash"],function(e,c){function b(a,b,c,d){this.init.apply(this,arguments)}b.defaults={context:{},isVisibleProperty:null};b.prototype.init=function(a,f,g,d){this._$el=e(a);this._template=g;this._options=c.extend({},b.defaults,d);this._$placeholder=this._$el.find(".replacement-placeholder");this._currentValue={};c.bindAll(this,"updateValue","updateVisibility");this._destroyCallbacks=[f.onValue(this.updateValue)];this._options.isVisibleProperty&&
this._destroyCallbacks.push(this._options.isVisibleProperty.onValue(this.updateVisibility))};b.prototype.updateVisibility=function(a){this._$el.toggleClass("hidden",!a)};b.prototype.updateValue=function(a){a=c.extend({},a,this._options.context);c.isEqual(a,this._currentValue)||(this._currentValue=a,a=this._template(a),this._$placeholder.stop().fadeOut(0).html(a).fadeIn())};b.prototype.destroy=function(){this._destroyCallbacks.forEach(Function.prototype.call,Function.prototype.call)};return b});