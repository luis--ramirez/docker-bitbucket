define("bitbucket/internal/widget/faux-upload-field","jquery lodash bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/navigator bitbucket/internal/widget/client-file-handlers/client-file-handler bitbucket/internal/widget/upload-interceptor".split(" "),function(c,f,h,k,l,d,m){function b(c,a){this.init.apply(this,arguments)}b.prototype.defaults={clientFileHandler:null,accept:null,allowMultiple:!1};b.prototype.init=function(b,a){this.$el=c(b);this._destroyables=
[];switch(a.accept){case d.typeFilters.audio:a.accept="audio/*";break;case d.typeFilters.image:a.accept="image/*";break;case d.typeFilters.imageWeb:a.accept="image/jpeg, image/gif, image/png";break;case d.typeFilters.video:a.accept="video/*"}this.options=c.extend({},this.defaults,a);var g=f.uniqueId("faux-upload-field-"),e=c(bitbucket.internal.widget.fauxUploadField.uploadField({id:g,accept:this.options.accept,allowMultiple:this.options.allowMultiple})).hide().insertAfter(this.$el);this.$el.tooltip({gravity:c.fn.tipsy.autoNS});
this.$el.is("label")?this.$el.attr("for",g):l.isIE()?(this.$el.hide(),e.show()):this._destroyables.push(k.chainWith(this.$el).on("click",h.preventDefault(e.click.bind(e))));this.options.clientFileHandler&&this._destroyables.push(new m(e,this.options.clientFileHandler))};b.prototype.destroy=function(){f.invoke(this._destroyables,"destroy")};return b});