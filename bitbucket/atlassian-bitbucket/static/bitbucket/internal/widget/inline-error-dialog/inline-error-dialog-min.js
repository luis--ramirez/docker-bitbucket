define("bitbucket/internal/widget/inline-error-dialog",["aui","jquery","lodash","bitbucket/internal/util/events"],function(e,c,b,f){function a(a,b){this.init.apply(this,arguments)}a.prototype.init=function(a,g){this.errors=[];this.options=c.extend({persistent:!0},g);this._destroyables=[];b.bindAll(this,"_renderDialogContents","hide","show","refresh","add","reset","destroy");var d={noBind:!0,persistent:this.options.persistent,addActiveClass:!1,fadeTime:0};this._$inlineDialog=e.InlineDialog(c(a),b.uniqueId("inline-error-dialog-"),
this._renderDialogContents,d);this.options.persistent&&this._destroyables.push(f.chainWith(this._$inlineDialog).on("click",".dismiss-button",this.hide))};a.prototype._renderDialogContents=function(a,c,d){a.html(bitbucket.internal.widget.inlineErrorDialog.contents({title:b.isFunction(this.options.title)?this.options.title(this.errors):this.options.title,subtitle:b.isFunction(this.options.subtitle)?this.options.subtitle(this.errors):this.options.subtitle,errors:this.errors,persistent:this.options.persistent})).addClass("inline-error-contents");
d()};a.prototype.hide=function(){this._$inlineDialog.hide();this.reset()};a.prototype.show=function(){this._$inlineDialog.show();this.refresh()};a.prototype.refresh=function(){this._$inlineDialog.refresh()};a.prototype.add=function(a){this.errors.push(a)};a.prototype.reset=function(){this.errors.length=0};a.prototype.destroy=function(){this.errors.length=0;b.invoke(this._destroyables,"destroy");this._$inlineDialog.remove()};return a});