define("bitbucket/internal/widget/upload-interceptor",["jquery","lodash","bitbucket/internal/util/events"],function(c,d,e){function b(a,b){this.init.apply(this,arguments)}b.prototype.init=function(a,b){d.bindAll(this,"onSelectFile");this.$el=c(a);this.clientFileHandler=b;this._destroyables=[];this._destroyables.push(e.chainWith(this.$el).on("change",this.onSelectFile))};b.prototype.onSelectFile=function(a){a=a.target;a.files&&a.files.length&&this.clientFileHandler&&(this.clientFileHandler.handleFiles(a.files,
a),c(a).wrap("\x3cform\x3e").parent("form").trigger("reset").end().unwrap())};b.prototype.destroy=function(){d.invoke(this._destroyables,"destroy")};return b});