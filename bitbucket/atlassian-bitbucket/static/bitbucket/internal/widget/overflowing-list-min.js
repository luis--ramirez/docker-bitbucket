define("bitbucket/internal/widget/overflowing-list",["jquery"],function(d){function g(a,b,c){this._$container=d(a);this._opts=d.extend({overflowMenuId:this._$container.attr("data-overflow-menu-id")},g.defaults,c);this._items=Array.prototype.slice.call(b)}function n(a,b){a.find("\x3e .aui-dropdown2-trigger .aui-badge").text(b)}function p(a,b,c){d(aui.dropdown2.trigger({menu:{id:c},content:'\x3cdiv class\x3d"extras-dropdown-trigger"\x3e'+aui.badges.badge({text:"?"})+"\x3c/div\x3e"}).appendTo(a));return d(aui.dropdown2.contents({id:c,
extraClasses:b,content:'\x3cul class\x3d"aui-list-truncate"\x3e\x3c/ul\x3e'})).appendTo(a).children("ul")}g.defaults={maxOpen:5,itemSelector:void 0,overflowMenuClass:"aui-style-default aui-dropdown2-tailed",getItemHtml:function(a,b){return"\x3cspan\x3e"+("string"===typeof a?a:JSON.stringify(a))+"\x3c/span\x3e"},compareFn:function(a,b){return-1}};g.prototype.addItem=function(a){var b=this._opts.maxOpen,c=this._opts.compareFn,k=this._opts.getItemHtml,g=this._opts.overflowMenuClass,m=this._opts.overflowMenuId,
e=this._$container,h;h=m?d("#"+m+" \x3e ul"):e.children(".aui-dropdown2:last \x3e ul");var l=h.find("li").children(this._opts.itemSelector),l=e.children(this._opts.itemSelector).not(".aui-dropdown2-trigger, .aui-dropdown2").add(l),q=!1,f,r=this._items.length;for(f=0;f<r;f++)if(0>c(a,this._items[f])){f>=b?(c=d(k(a,!0)),c.wrap("\x3cli/\x3e").parent().insertBefore(l.eq(f).parent()),n(e,this._items.length+1-b)):(c=d(k(a,!1)),c.insertBefore(l.eq(f)).hide().fadeIn("fast"),this._items.length>=b&&(l.eq(b-
1).remove(),(h.length?h:p(e,g,m)).prepend(d("\x3cli/\x3e").append(k(this._items[b-1],!0))),n(e,this._items.length+1-b)));this._items.splice(f,0,a);q=!0;break}q||(this._items.length>=b?((h.length?h:p(e,g,m)).append(d(k(a,!0)).wrap("\x3cli/\x3e").parent()),n(e,this._items.length+1-b)):(c=d(k(a,!1)),c.appendTo(e).hide().fadeIn("fast")),this._items.push(a))};return g});