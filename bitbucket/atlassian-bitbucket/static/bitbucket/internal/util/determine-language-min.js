define("bitbucket/internal/util/determine-language",["codemirror","jquery","lodash","exports"],function(f,q,g,k){document.documentElement.className+=" cm-s-stash-default";var r=WRM.data.claim("com.atlassian.bitbucket.server.bitbucket-web:determine-language.syntax-highlighters")||{},l={},m={};g.forEach(r,function(c,a){g.forEach(c.e,function(b){l[b]=a});g.forEach(c.x,function(b){m[b]=a})});var n={},p={};k.fromFileInfo=function(c){var a=c.path,b=a.lastIndexOf("."),b=-1===b?a:a.substring(b+1),d;if(1<
c.firstLine.length)if(d=/^#!(?:\/(?:usr\/)?(?:local\/)?bin\/([^\s]+))(?:\s+([^\s]+))?/.exec(c.firstLine)){var e=d[1];"env"===e&&(e=d[2]);d=e}else d=null;else d=null;var e=n.hasOwnProperty(b)?n[b]:d&&p.hasOwnProperty(d)?p[d]:null,h;e||((h=g.has(l,b)?l[b]:null)||(h=null!=d?g.has(m,d)?m[d]:null:null),e=(e=h?f.findModeByMIME(h):f.findModeByFileName(a))||f.findModeByMIME("text/plain"),e.builtIn=!0);return c.legacy?h||"text":e};k.registerCodeMirrorMode=function(c,a,b){a&&a.forEach(function(a){n[a]=c});
b&&b.forEach(function(a){p[a]=c})};k.getCodeMirrorModeForName=function(c){var a=f.findModeByName(c)||f.findModeByExtension(c);return a?"undefined"===typeof f.mimeModes[a.mime]?WRM.require("wr!com.atlassian.bitbucket.server.bitbucket-highlight:"+a.mode).then(function(){return a}):q.Deferred().resolve(a):q.Deferred().resolve(f.findModeByMIME("text/plain"))}});