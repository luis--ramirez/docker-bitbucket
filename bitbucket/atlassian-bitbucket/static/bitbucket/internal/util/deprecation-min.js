define("bitbucket/internal/util/deprecation",["lodash","bitbucket/internal/util/events","bitbucket/internal/util/text"],function(u,m,p){function k(a,c,d,f){if("function"===typeof a)return a;var e=!1;return function(){if(!e){e=!0;var b=p.toSentenceCase(a)+" has been deprecated"+(d?" since "+d:"")+" and will be removed in "+(f||"a future release")+".";c&&(b+=" Use "+c+" instead.");var h=Error(),h=(h=h.stack||h.stacktrace)&&h.replace(/^Error\n/,"")||"No stack trace of the deprecated usage is available in your current browser.";
console.warn(b+"\n"+h)}}}function l(a,c,d,f,e){if(a.__deprecated)return a;var b=k(c||a.name||"this function",d,f,e);c=function(){b();return a.apply(this,arguments)};Object.defineProperty(c,"__deprecated",{enumerable:!1,configurable:!1,writable:!1,value:!0});return c}function q(a,c,d,f,e){if(a.__deprecated)return a;c=l(a,c,d,f,e);c.prototype=a.prototype;u.extend(c,a);return c}function v(a,c,d,f,e,b){var h=a[c],g=k(d||c,f,e,b);Object.defineProperty(a,c,{get:function(){g();return h},set:function(a){h=
a;g();return a}})}function n(a,c,d,f,e,b){"function"===typeof a[c]?a[c]=q(a[c],d||c,f,e,b):v(a,c,d,f,e,b)}function r(a,c,d,f,e){if("id"!==d){if(w.test(d))throw Error("The property "+d+" cannot be deprecated when converting to a Brace model.");var b=k(c+"::"+d,c+"::get|set('"+d+"')",f,e);Object.defineProperty(a.prototype,d,{get:function(){b();return this.get(d)},set:function(a){b();this.set(d,a)}})}}var g=Object.prototype.hasOwnProperty,x=Object.prototype.toString,w=/^(attributes|url|isNew|hasChanged|changed(Attributes)|previous(Attributes)|clone)$/,
t={};return{fn:l,construct:q,prop:n,obj:function(a,c,d,f,e){for(var b in a)g.call(a,b)&&n(a,b,c+b,d&&d+b,f,e)},braceAsJson:function(a,c,d,f){var e=a.prototype.namedAttributes,b;if("[object Array]"===x.call(e))for(b=e.length;b--;)r(a,c,e[b],d,f);else for(b in e)g.call(e,b)&&r(a,c,b,d,f)},braceAttribute:function(a,c,d,f,e){if(g.call(a.prototype.namedAttributes,c)){var b=p.toSentenceCase(c);a.prototype["get"+b]=l(a.prototype["get"+b],c,d,f,e);a.prototype["set"+b]=l(a.prototype["set"+b],c,d,f,e)}},jsonAsBrace:function(a,
c,d){var f=a.constructor.prototype;a=a.clone();var e=a.toJSON(),b;Object.defineProperty(a,"__json",{enumerable:!1,configurable:!1,writable:!1,value:e});c=k("use of this object's Backbone properties","raw JSON properties on this object",c,d);for(b in a)g.call(e,b)||n(a,b,c);for(b in e)!g.call(e,b)||g.call(a,b)||g.call(f,b)||(a[b]=e[b]);return a},triggerDeprecated:function(a,c){if(m.listeners(a).length){if(5>arguments.length)throw Error("eventName, context, alternativeName, sinceVersion, and removeInVersion must all be provided (but can be null).");
var d=Array.prototype.slice.call(arguments,0,arguments.length-3),f=arguments[arguments.length-3],e=arguments[arguments.length-2],b=arguments[arguments.length-1];(t[a]||(t[a]=k("Event '"+a+"'",f?"'"+f+"'":null,e,b)))();m.trigger.apply(m,d)}},getMessageLogger:k}});