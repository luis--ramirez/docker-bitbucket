define("bitbucket/internal/util/shortcuts","aui bacon bitbucket/util/events bitbucket/internal/util/navigator bitbucket/internal/widget/keyboard-shortcuts exports".split(" "),function(l,m,n,p,f,g){function k(b){var a=d[b];a.lazy.whenIType&&a.lazy.whenIType.unbind();var c=l.whenIType(a.lazy.keys);a.lazy.whenIType=c;c.execute(a._sink);c.execute(f.fireKeyboardShocutAnalyticsEvent.bind(null,a.lazy.analyticsContext,b))}function h(b){d.hasOwnProperty(b)||(d[b]={analyticsBound:!1,lazy:{keys:null,whenIType:null,
analyticsContext:null},baconSink:function(a){this._sink&&this._sink(a)},_sink:null,stream:m.fromBinder(function(a){var c=d[b];c._sink=a;c.lazy.keys&&k(b);return function(){c._sink=null;c.lazy.whenIType&&c.lazy.whenIType.unbind()}})});return d[b]}var d={};g.registerLazy=function(b,a,c){p.isMac()&&(c=c.replace(/ctrl/i,"meta"));a.unbind();a=h(b);a.lazy.keys=c;a.lazy.analyticsContext=f.getEnablingContext();a._sink&&k(b)};g.setup=function(b,a,c){var e=h(b);a.execute(e.baconSink.bind(e));e.analyticsBound||
(e.analyticsBound=!0,f.bindKeyboardShortcutAnalytics(b,d[b].stream));n.trigger("bitbucket.internal.keyboard.shortcuts."+b,a,c)};g.bind=function(b,a){return h(b).stream.onValue(a)}});