define("bitbucket/internal/util/analytics-helper/analytics-helper-ui-bindings","jquery lodash bitbucket/util/navbuilder bitbucket/util/state bitbucket/internal/util/analytics-helper/analytics-helper bitbucket/internal/util/events bitbucket/internal/util/html".split(" "),function(a,e,l,c,m,h,n){function p(b){if(b.on)h.on(b.on,function(a){d(b.callback.call(this,a))})}function q(b){b.container.on(b.event||"click",b.selector||"a",function(c){if(b.eventName)d(b.eventName);else{var f=a(this),g=this;e.forEach(b.eventMap,
function(a,b){var k;f.is(b)&&(k=e.isFunction(a)?a.call(g,c):a)&&d(k)})}})}function d(a){a&&(e.isString(a)&&(a={eventName:a}),h.trigger(m.prefixEventName(a.eventName),null,a.data))}a(document).ready(function(){var b=a(document),e=a("#header"),f=a("#app-switcher"),g=a(n.sanitizeId("#com.atlassian.bitbucket.server.bitbucket-server-web-fragments-help-menu")),d=a("#user-dropdown-menu"),h=a("#inbox-trigger"),k=a(".inbox-menu");[{container:e,eventMap:{"#logo a":"nav.logo.clicked",".projects-link":"nav.projects.clicked",
".admin-link":"nav.globalsettings.clicked"}},{container:f,selector:f,event:"aui-dropdown2-show",eventName:"applinks.menu.opened"},{container:f,eventName:"applinks.menu.clicked"},{container:g,selector:g,event:"aui-dropdown2-show",eventName:"nav.help.opened"},{container:g,eventMap:{a:function(){return{eventName:"nav.help.item.clicked",data:{webItemKey:a(this).attr("data-web-item-key")}}}}},{container:d,selector:d,event:"aui-dropdown2-show",eventName:"nav.profile.opened"},{container:d,eventMap:{a:function(){return{eventName:"nav.profile.item.clicked",
data:{webItemKey:a(this).attr("data-web-item-key")}}}}},{container:k,selector:h,eventMap:{a:function(){return{eventName:"nav.inbox.opened",data:{count:a(this).find(".aui-badge").text()}}}}},{container:b,selector:"#inline-dialog-inbox-pull-requests-content a",eventMap:{".menu-item a":function(){var b=a(this).attr("href"),c=a(b).find("tr.prNeedsWork").length;return{eventName:"nav.inbox.tab.selected",data:{name:"#inbox-pull-request-reviewer"===b?"reviewing":"created",reviewed:c,unreviewed:a(b).find("tr").length-
c}}},".pull-requests-table td.title a":function(){var b=a(this),c=b.closest(".tabs-pane").is("#inbox-pull-request-created");return{eventName:"nav.inbox.item.clicked",data:{isAuthor:c,status:c?null:b.closest("tr").is(".prNeedsWork")?"NEEDS_WORK":"UNAPPROVED"}}}}},{container:a("#footer ul"),eventMap:{a:function(){return{eventName:"nav.footer.item.clicked",data:{linkId:a(this).closest("li").attr("data-key")}}}}}].forEach(q);[{on:"bitbucket.internal.feature.fileContent.diffViewDataLoaded",callback:function(){if(!c.getPullRequest()||
window.location.pathname!==l.currentPullRequest().overview().build()){var a;!1!==c.getPullRequest()?a="pullrequest":!1!==c.getCommit()?a="commit":!1===c.getPullRequest()&&!1===c.getCommit()&&c.getRef()?a="source-view":!1===c.getPullRequest()&&!1===c.getCommit()&&!1===c.getRef()&&(a="create-pullrequest",window.location.pathname===l.currentRepo().compare().diff().build()&&(a="compare-branch"));var b=require("bitbucket/internal/feature/file-content/diff-view-options").getOptions();return{eventName:"diff-view.viewed",
data:{ignoreWhitespace:b.ignoreWhitespace,hideComments:b.hideComments,hideEdiff:b.hideEdiff,diffType:b.diffType,source:a}}}}},{on:"bitbucket.internal.feature.branch-creation.branchCreated",callback:function(){return{eventName:"branch.created"}}},{on:"bitbucket.internal.page.branches.revisionRefRemoved",callback:function(){return{eventName:"branch.deleted"}}}].forEach(p)})});