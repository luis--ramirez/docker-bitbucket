define("bitbucket/internal/layout/repository","jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/repository/sticky-branches bitbucket/internal/model/page-state bitbucket/internal/model/repository bitbucket/internal/util/events bitbucket/internal/widget/quick-copy-text bitbucket/internal/widget/sidebar exports".split(" "),function(a,n,p,q,m,r,h,t,u,v){function w(c){c=new r(c);m.setRepository(c);m.setProject(c.getProject());a(".aui-page-header-image \x3e a").on("click",function(){h.trigger("bitbucket.internal.sidebar.clickAvatar.expanded."+
a(".aui-sidebar").attr("aria-expanded"),null)})}function x(){var c=a(".clone-url"),b=a(".repository-protocol"),e=a("#"+b.attr("aria-controls")),d=e.find("li"),f,g,k="";b.is("button")?(l(b,b.text()),f=b.attr("data-clone-url"),g=b.attr("data-module-key")):(l(b,d.first().children("a").text()),f=d.first().attr("data-clone-url"),g=d.first().attr("data-module-key"));a(".clone-url").find(".clone-url-input").attr("value",f);c.addClass(g);k=g;a(document).on("click","#repository-protocol-selector li",function(d){var f=
a(this);l(a(".repository-protocol"),f.text());a(".clone-url").find(".clone-url-input").attr("value",f.attr("data-clone-url")).select();g=f.attr("data-module-key");c.removeClass(k).addClass(g);k=g;h.trigger("bitbucket.internal.feature.repository.clone.protocol.changed",null,g,f.attr("data-clone-url"));d.stopPropagation();e.is(":visible")&&b.trigger("aui-button-invoke");d.preventDefault()});h.trigger("bitbucket.internal.feature.repository.clone.protocol.initial",null,g,f)}function l(a,b){var e=a.children("span").remove();
a.text(b).append(e)}function y(c){function b(){d&&d.open&&(d.open=!1)}var e,d;a(c).attr("aria-controls","repo-clone-dialog");a(document).on("click",c,function(a){a.preventDefault();f();d.open=!0;e.select()});var f=n.once(function(){d=document.getElementById("repo-clone-dialog");e=a(d).find(".clone-url-input");h.on("bitbucket.internal.feature.sidebar.collapseEnd",b);h.on("bitbucket.internal.feature.sidebar.expandEnd",b)});a("#clone-dialog-options").html(bitbucket.internal.layout.cloneDialogOptions())}
function z(){var c=a(".aui-page-header-actions .create-pull-request");h.on("bitbucket.internal.layout.branch.revisionRefChanged",function(a){var e=p.currentRepo().createPullRequest();!a.isDefault()&&a.isBranch()&&(e=e.sourceBranch(a.getId()));c.attr("href",e.build())})}function A(){a(".aui-sidebar[aria-expanded\x3dfalse] .aui-page-header-image").tooltip({gravity:"w",delayIn:0,live:!0,html:!0,aria:!0,className:"aui-sidebar-section-tooltip",title:function(){return a(this).find(".aui-avatar").attr("data-tooltip")}})}
v.onReady=function(c,b){w(c);x();t.onReady();a(document).ready(u.onReady);q.onReady();y(b);z();a(".repository-badge .badge").tooltip({gravity:"n"});A();h.on("bitbucket.internal.widget.keyboard-shortcuts.register-contexts",function(a){a.enableContext("repository")})}});