define("bitbucket/internal/model/repository-hook",["aui","backbone-brace","lodash","bitbucket/util/navbuilder","bitbucket/internal/util/ajax"],function(h,e,g,c,d){function f(a,b,d,e,f){return g.extend({},f,{fallbackTitle:h.I18n.getText("bitbucket.web.repository.settings.hooks.notfound.fallback.title"),fallbackUrl:c.currentRepo().hooks().build(),canClose:!1,shouldReload:!1})}var b=e.Model.extend({idAttribute:"key",namedAttributes:{key:"string",name:"string",type:"string",description:"string",version:"string",
configFormKey:"string"}}),b=e.Model.extend({namedAttributes:{details:b,enabled:"boolean",configured:"boolean"},initialize:function(){this.id=this.getDetails().getKey()},loadSettings:function(){return d.rest({url:c.rest().currentRepo().hook(this).settings().build()})},saveSettings:function(a){return d.rest({url:c.rest().currentRepo().hook(this).settings().build(),type:"PUT",data:a,statusCode:{400:!1}})},enable:function(a){var b={url:c.rest().currentRepo().hook(this).enabled().build(),type:"PUT",statusCode:{404:f,
400:!1}};a&&(b.data=a);a=d.rest(b);a.done(g.bind(this.setEnabled,this,!0));return a},disable:function(){var a=d.rest({url:c.rest().currentRepo().hook(this).enabled().build(),type:"DELETE",statusCode:{404:f}});a.done(g.bind(this.setEnabled,this,!1));return a}});b.Collection=e.Collection.extend({model:b});return b});