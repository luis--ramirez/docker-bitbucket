define("bitbucket/internal/v2/feature/pull-request/analytics",["jquery","bitbucket/util/events","bitbucket/util/state","bitbucket/internal/util/analytics","exports"],function(h,c,b,k,d){function a(a){c.on(a,function(e){var f=a.substring(27);a.match(/comment.actions.reply|comment.actions.view/)&&(f=a.substring(39));var c=b.getPullRequest().id,d=b.getRepository().id,g;g=b.getCurrentUser().id===b.getPullRequest().author.user.id?"author":l()?"reviewer":m()?"participant":"other";e=h.extend({},{"pullRequest.id":c,
"repository.id":d,userRole:g},e);k.add(f,e,!0)})}function l(){var a=b.getPullRequest().reviewers;return a.length&&a.some(function(a){return a.user.id===b.getCurrentUser().id})}function m(){var a=b.getPullRequest().participants;return a.length&&a.some(function(a){return a.user.id===b.getCurrentUser().id})}d.init=function(){a("bitbucket.internal.feature.pullRequest.comment.actions.reply");a("bitbucket.internal.feature.pullRequest.comment.actions.view");a("bitbucket.internal.feature.pullRequest.commit.open");
a("bitbucket.internal.feature.pullRequest.commitDiff.view");a("bitbucket.internal.feature.pullRequest.diff.fileChange");a("bitbucket.internal.feature.pullRequest.overview.comment.delete.clicked");a("bitbucket.internal.feature.pullRequest.overview.comment.edit.clicked");a("bitbucket.internal.feature.pullRequest.overview.comment.like.clicked");a("bitbucket.internal.feature.pullRequest.overview.comment.open");a("bitbucket.internal.feature.pullRequest.overview.comment.reply.clicked");a("bitbucket.internal.feature.pullRequest.overview.comment.task.clicked");
a("bitbucket.internal.feature.pullRequest.overview.commit.open");a("bitbucket.internal.feature.pullRequest.tab.commits");a("bitbucket.internal.feature.pullRequest.tab.diff");a("bitbucket.internal.feature.pullRequest.tab.overview")}});