define("bitbucket/internal/v2/feature/pull-request/action-creators/change-self-reviewer","bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/bbui/actions/pull-request bitbucket/internal/bbui/models/models bitbucket/internal/model-transformer bitbucket/internal/util/analytics".split(" "),function(k,l,m,n,g,p,q){return function(b,e,c,r){var a="ADD_SELF"===c,f=b._stash,d=f.toRef.repository,t=d.project,h=e._stash,d=m.rest({type:a?"POST":"DELETE",url:l.rest().project(t).repo(d).pullRequest(f).participants(a?
null:h).build(),data:a?{user:e,role:"reviewer"}:null}).done(function(){k.trigger(a?"bitbucket.internal.feature.pullRequest.self.added":"bitbucket.internal.feature.pullRequest.self.removed",null,{action:c,user:h,pullRequest:f});q.add("pullRequest."+(c===g.SelfAction.ADD_SELF?"addSelf":"removeSelf"),{userStatus:r||g.ApprovalState.UNAPPROVED,"pullRequest.fromRef.repository.id":b.from_ref.repository.id,"pullRequest.id":b.id,"pullRequest.toRef.repository.id":b.to_ref.repository.id},!0)});return{type:n.PR_CHANGE_SELF_REVIEWER,
payload:{pullRequest:b,user:e,selfAction:c},meta:{promise:d.then(function(a){return{pullRequest:b,user:a?p.user(a.user):null,selfAction:c}})}}}});