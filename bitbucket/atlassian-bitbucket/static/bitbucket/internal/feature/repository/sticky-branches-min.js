define("bitbucket/internal/feature/repository/sticky-branches","jquery lodash bitbucket/util/navbuilder bitbucket/internal/util/browser-location bitbucket/internal/util/client-storage bitbucket/internal/util/events exports".split(" "),function(m,t,b,u,d,r,v){function n(a){a?(a=encodeURIComponent(a),h.attr("href",b.parse(h.attr("href")).replaceQueryParam("at",a)),k.attr("href",b.parse(k.attr("href")).replaceQueryParam("until",a)),l.attr("href",b.parse(l.attr("href")).replaceQueryParam("base",a))):
p()}function p(){h.attr("href",b.parse(h.attr("href")).deleteQueryParam("at"));k.attr("href",b.parse(k.attr("href")).deleteQueryParam("until"));l.attr("href",b.parse(l.attr("href")).deleteQueryParam("base"))}var h,k,l;v.onReady=function(){var a=b.parse(u.location.href),c=b.currentRepo().browse().build(),g=b.currentRepo().commits().build(),c=0===a.path().indexOf(c),g=a.path()===g,a=c?a.getQueryParamValue("at"):g?a.getQueryParamValue("until"):void 0,g=c||g,f=d.buildKey("current-branch","repo"),q=d.getSessionItem(f);
h=m("#repository-nav-files");k=m("#repository-nav-commits");l=m("#repository-nav-branches");var e;a&&c&&(e=(e=m("[data-revision-ref]","#repository-layout-revision-selector").data("revision-ref"))&&(e.id===a&&"commit"===e.type.id||e.id!==a&&("branch"===e.type.id||"tag"===e.type.id)&&/^[0-9a-f]{7,40}$/.test(a)));c=!(c&&e);a&&c?(a=decodeURIComponent(a),a!==q&&d.setSessionItem(f,a),n(a)):g&&c?d.removeSessionItem(f):q&&n(q);r.on("bitbucket.internal.layout.branch.revisionRefChanged",function(a){a&&(a.getIsDefault()?
(p(),d.removeSessionItem(f)):(a=a.getId(),n(a),d.setSessionItem(f,a)))});r.on("bitbucket.internal.*.*.revisionRefRemoved",function(a){var b=d.getSessionItem(f);b&&t.endsWith(a.id,b)&&(p(),d.removeSessionItem(f))})}});