define("bitbucket/internal/feature/repository/repository-table","aui jquery lodash bitbucket/util/events bitbucket/util/navbuilder bitbucket/internal/model/page-state bitbucket/internal/widget/paged-table".split(" "),function(e,c,f,g,k,d,h){function a(l,b){var a={target:l,ajaxDataType:"json",tableMessageClass:"repository-table-message",allFetchedMessageHtml:'\x3cp class\x3d"no-more-results"\x3e'+e.I18n.getText("bitbucket.web.repository.allfetched")+"\x3c/p\x3e",noneFoundMessageHtml:'\x3ch3 class\x3d"no-results entity-empty"\x3e'+
e.I18n.getText("bitbucket.web.repository.nonefetched")+"\x3c/h3\x3e",statusCode:{401:function(){return c.Deferred().resolve({start:0,size:0,values:[],isLastPage:!0}).promise()}},paginationContext:"repository-table"};b=f.extend({},a,b);h.call(this,b);this._project=b.projectKey?{key:b.projectKey,"public":!1}:(a=d.getProject())&&a.toJSON();this._options=b;this.bindUIEvents()}f.extend(a.prototype,h.prototype);a.prototype.bindUIEvents=function(){c(".create-repository-link").on("click","a",g.trigger.bind(null,
"bitbucket.internal.ui.repository-list.create.clicked"));c(this.options.target).on("click","a",function(){var a=c(this),b=d.getProject()?d.getProject().id:a.closest("td").find(".project-name a").attr("data-project-id");g.trigger("bitbucket.internal.ui.repository-list.item.clicked",null,{repositoryId:a.attr("data-repository-id"),projectId:b})})};a.prototype.buildUrl=function(a,b){return k.project(this._project.key).allRepos().withParams({start:a,limit:b}).build()};a.prototype.handleNewRows=function(a,
b){var c=this._project,d=this._options,e=f.map(a.values,function(a){if(!a.project)if(c)a.project=c;else throw Error("No project was provided for repo id\x3d"+a.id+" slug\x3d"+a.slug+" but we are in a global context");return bitbucket.internal.feature.repository.repositoryRow({repository:a,showProject:d.showProject,showPublicStatus:d.showPublicStatus})});this.$table.show().children("tbody")["html"!==b?b:"append"](e.join(""))};a.prototype.handleErrors=function(a){};return a});