define("bitbucket/internal/feature/repository/branch-diagram",["jquery","lodash","bitbucket/internal/model/repository","bitbucket/internal/model/revision-reference"],function(f,e,g,h){function a(b){this.$el=f(b)}a.prototype._updateRefLozenge=function(b,c,a){var d=this.$el.find("."+b);d.trigger("mouseout");c&&c instanceof h?c.getDisplayId()||c.getId()?(b=bitbucket.internal.feature.repository.refLozenge({ref:c.toJSON(),repository:a&&a instanceof g?a.toJSON():null,extraClasses:b}),d.length?d.replaceWith(b).removeClass("invisible"):
this.$el.append(b)):d.addClass("invisible"):null!=c&&""!==c||d.addClass("invisible");d=this.$el.find(".source-ref").length&&this.$el.find(".target-ref").length;this.$el.toggleClass("disabled",!d)};a.prototype.updateSourceRef=e.partial(a.prototype._updateRefLozenge,"source-ref");a.prototype.updateTargetRef=e.partial(a.prototype._updateRefLozenge,"target-ref");return a});