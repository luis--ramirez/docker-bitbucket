define("bitbucket/internal/feature/project/project-avatar-picker",["aui","jquery","bitbucket/internal/widget/avatar-picker-dialog"],function(g,e,a){function b(a,c){this.init.apply(this,arguments)}b.prototype.init=function(b,c){this.$container=e(b);var d=this.$container.find(".project-avatar-preview .aui-avatar-project img"),h=this.$container.find(".project-avatar-upload input[name\x3davatar]"),f=this.$container.find(".project-avatar-upload button");d.attr("src")||e('\x3cdiv class\x3d"project-avatar-default-preview"\x3e\x3c/div\x3e').insertAfter(d);
a.isSupported()?new a({dialogTitle:g.I18n.getText("bitbucket.web.project.avatar.picker.title"),maskShape:a.maskShapes.CIRCLE,trigger:f,onCrop:function(a){d.attr("src",a);h.val(a)},xsrfToken:c&&c.xsrfToken?c.xsrfToken:null}):f.remove()};return b});