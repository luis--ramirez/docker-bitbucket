define("bitbucket/internal/feature/pull-request/pull-request-history",["jquery","bitbucket/internal/util/client-storage","bitbucket/internal/util/events","exports"],function(l,e,a,f){function h(g){b(g.$tree)}function b(g){g.find(".jstree-leaf").each(function(g,a){var c=l(a),e=c.data("path").toString,b=c.data("contentId");d[e]===b&&c.addClass("viewed")})}function k(a){var b=a.data("path").toString,f=a.data("contentId");d[b]!==f&&(d[b]=f,e.setItem(c,d),a.addClass("viewed"))}var c,d;f.init=function(){c=
e.buildKey("history","pull-request");d=e.getItem(c)||{};a.on("bitbucket.internal.feature.commit.difftree.treeInitialised",h);a.on("bitbucket.internal.feature.commit.difftree.nodeOpening",b);a.on("bitbucket.internal.feature.commit.difftree.selectedNodeChanged",k)};f.reset=function(){d=c=null;a.off("bitbucket.internal.feature.commit.difftree.treeInitialised",h);a.off("bitbucket.internal.feature.commit.difftree.nodeOpening",b);a.off("bitbucket.internal.feature.commit.difftree.selectedNodeChanged",k)}});