define("bitbucket/internal/feature/pull-request/list/analytics",["jquery","lodash","bitbucket/util/state","bitbucket/internal/util/events","exports"],function(d,m,l,b,h){function n(a){d(a).on("click",function(){b.trigger("bitbucket.internal.ui.pullRequestList.createAction.clicked",null,{repositoryId:c})})}function p(){var a=["SUCCESSFUL","FAILED","INPROGRESS","NONE"];d(document).on("click","#bitbucket-pull-request-table .build-status-pr-list-col-value .build-icon",function(){var f=d(this),g=f.attr("data-build-status");
-1!==a.indexOf(g)&&(f=f.closest("tr").attr("data-pull-request-id"),b.trigger("bitbucket.internal.ui.pullRequestList.buildStatus.clicked",null,{buildStatus:g,pullRequestId:f,repositoryId:c}))})}function q(){d(document).on("click","#empty-list-create-pr-button",function(a){b.trigger("bitbucket.internal.ui.pullRequestList.empty.create.clicked",null,{repositoryId:c,page:"pull-request-intro"})});d(document).on("click",".empty-banner-content a",function(a){b.trigger("bitbucket.internal.ui.pullRequestList.empty.create.clicked",
null,{repositoryId:c,page:"no-open-prs"})});d(document).on("click","#empty-list-help-button",function(a){b.trigger("bitbucket.internal.ui.pullRequestList.empty.help.clicked",null,{repositoryId:c,page:"pull-request-intro"})});d(document).on("click","#reset-filters",function(a){b.trigger("bitbucket.internal.ui.pullRequestList.empty.viewOpen.clicked",null,{repositoryId:c,page:"no-filtered-prs"})})}function r(){var a=Date.now();d(document).on("click","#bitbucket-pull-request-table .pull-request-title",
function(f){var g=d(this).closest("tr");f=g.attr("data-pull-request-id");var e=g.find(".title .user-avatar").attr("data-username"),h=0<g.find('.reviewers .user-avatar[data-username\x3d"'+k+'"]').length,g=g.find(".build-status-pr-list-col-value .build-icon").attr("data-build-status");b.trigger("bitbucket.internal.ui.pullRequestList.row.clicked",null,{authorIsSelf:e===k,buildStatus:g,isReviewer:h,pullRequestId:f,repositoryId:c,timeSincePageLoaded:Date.now()-a})})}var c=l.getRepository().id,k=l.getCurrentUser().name,
e;h.init=function(a){var f=d("#list-create-pr-button");e=a.filterParams;n(f);p();q();r();d(document).ready(function(){b.trigger("bitbucket.internal.ui.pullRequestList.viewed",null,{authorIsSelf:a.filterParams.author_id===k,filteredByAuthor:null!=a.filterParams.author_id,filteredByReviewer:"true"===a.filterParams.reviewer_self,filteredByTarget:null!=a.filterParams.target_ref_id,repositoryId:c})})};h.onFilterChanged=function(a){m.isObject(e)||(e=a);a.state&&e.state!==a.state&&b.trigger("bitbucket.internal.ui.pullRequestList.filteredBy.state",
null,{repositoryId:c,state:a.state});a.author_id&&e.author_id!==a.author_id&&b.trigger("bitbucket.internal.ui.pullRequestList.filteredBy.author",null,{repositoryId:c,authorIsSelf:a.author_id===k});a.target_ref_id&&e.target_ref_id!==a.target_ref_id&&b.trigger("bitbucket.internal.ui.pullRequestList.filteredBy.target",null,{repositoryId:c});a.reviewer_self&&e.reviewer_self!==a.reviewer_self&&b.trigger("bitbucket.internal.ui.pullRequestList.filteredBy.reviewer",null,{repositoryId:c});e=a};h.onPaginate=
function(a){b.trigger("bitbucket.internal.ui.nav.pagination",null,{context:"pull-request-list",page:a.page})}});