define("bitbucket/internal/feature/file-content/diff-view-options-panel","aui chaperone jquery lodash bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/shortcuts".split(" "),function(a,l,g,m,h,n,f){l.registerFeature("side-by-side-diff-discovery",[{id:"side-by-side-diff-discovery",selector:".diff-view-options",title:a.I18n.getText("bitbucket.web.diff.sidebyside.feature.discovery.title"),content:a.escapeHtml(a.I18n.getText("bitbucket.web.diff.sidebyside.feature.discovery.content")),
width:330,alignment:"bottom right",once:!0}]);return function(a,d){function e(c){"false"===a.find("#diff-options-dropdown").attr("aria-hidden")&&a.find("#diff-options-dropdown-trigger").trigger("aui-button-invoke")}function k(c){e();d.set(c,!d.get(c))}var b=[];b.push(f.bind("requestIgnoreWhitespace",k.bind(null,"ignoreWhitespace")));b.push(f.bind("requestHideComments",k.bind(null,"hideComments")));b.push(f.bind("requestHideEdiff",k.bind(null,"hideEdiff")));b.push(f.bind("changeDiffTypeRequested",
function(){e();d.set("diffType","unified"===d.get("diffType")?"side-by-side":"unified")}));b.push(h.chainWith(a).on("aui-dropdown2-item-check aui-dropdown2-item-uncheck","#diff-options-core .aui-dropdown2-checkbox, #diff-options-core .aui-dropdown2-radio",function(c){e();var a=g(this),b=a.attr("data-key"),p=a.attr("data-value");c="aui-dropdown2-item-check"===c.type;!c&&a.hasClass("aui-dropdown2-radio")||d.set(b,p||c)}).on("aui-dropdown2-show","#diff-options-dropdown",function(a){g(this).find("#diff-options-core .aui-dropdown2-checkbox, #diff-options-core .aui-dropdown2-radio").each(function(){var a=
g(this),c=a.attr("data-key"),b=a.attr("data-value"),b=(c=d.get(c))&&(c===b||!0===c);a.toggleClass("aui-dropdown2-checked checked",b).attr("aria-checked",b)});b.push(h.chain().on("window.scroll.throttled",e).destroy)}).on("aui-dropdown2-hide","#diff-options-dropdown",function(a){h.off("window.scroll.throttled",e)}).destroy);return{destroy:m.partial(n.applyAll,b)}}});