define("bitbucket/internal/feature/file-content/diff-view-options",["jquery","lodash","bitbucket/internal/util/client-storage","bitbucket/internal/util/events"],function(k,d,f,g){function a(){}var h=d.once(function(){return f.buildKey(["diff-view","options"],"user")});g.addLocalEventMixin(a.prototype);a.prototype.getOptions=d.memoize(function(){return d.extend({},this.defaults,f.getItem(h()))});a.prototype.defaults={ignoreWhitespace:!1,hideComments:!1,hideEdiff:!1,diffType:"unified"};a.prototype.triggerUpdate=
function(e,a){var b={key:e,value:a};this.trigger("change",b);g.trigger("bitbucket.internal.feature.fileContent.optionsChanged",null,b)};a.prototype.set=function(a,c,b){this.getOptions()[a]=c;f.setItem(h(),this.getOptions());!1!==b&&this.triggerUpdate(a,c)};a.prototype.get=function(a){return this.getOptions()[a]};a.prototype.proxy=function(e){var c=this,b=new a;b.getOptions=function(){return k.extend({},c.getOptions(),e)};b.set=function(a,b,d){void 0===e[a]&&c.set(a,b,d)};b.destroy=g.chainWith(c).on("change",
function(a){void 0===e[a.key]&&b.trigger("change",a)}).destroy;return b};return new a});