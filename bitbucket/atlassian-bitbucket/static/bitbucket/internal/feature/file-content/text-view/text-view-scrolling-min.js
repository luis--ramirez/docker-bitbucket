define("bitbucket/internal/feature/file-content/text-view/text-view-scrolling",["jquery","bitbucket/internal/feature/file-content/text-view/request-window-scrolls","bitbucket/internal/util/mixin"],function(f,g,h){return{mixInto:h({scrollHandleIntoFocus:function(a){var b=this._editorForHandle(a),c=b.getScrollInfo();a=c.height>c.clientHeight?b.heightAtLine(a._handle.lineNo(),"local"):0;this._scrollToFocusedOffset(a,c,b)},scrollHandleIntoView:function(a){var b=this._editorForHandle(a);b.lastLine()===
a._handle.lineNo()?b.scrollTo(null,b.heightAtLine(b.lastLine()+1)):b.scrollIntoView(a._handle.lineNo()+1)},scrollToFileComments:function(a,b){var c=this._editors[0],e=c.getScrollInfo(),d=f("#page").offset().top;null!=b&&a>d&&a+b<d+e.clientHeight||this._scrollToFocusedOffset(a-this._editorInnerOffset(),e,c)},scrollToTop:function(){this._scrollToSourcePosition(null,0)},scrollToWidgetOffset:function(a,b,c){var e=this._editorForHandle(a),d=e.getScrollInfo();if(d.height>d.clientHeight){if(a=e.heightAtLine(a._handle.lineNo(),
"local"),b=Math.max(0,a+b),null!=c&&(a=b-d.top,0<=a&&a<d.clientHeight-c))return}else b=0;this._scrollToFocusedOffset(b,d,e)},_requestWindowScrolls:function(a){var b=this;return g(this,a).done(function(a){b._scrollToSourcePosition=function(e,d){a.scroll(e,null!=d?Math.max(0,d+b._editorInnerOffset()):null)}}).fail(function(a){b._scrollToSourcePosition=function(a,b){throw Error("Not implemented");}})},_scrollToFocusedOffset:function(a,b,c){c.getInputField().blur();this._scrollToSourcePosition(null,a-
b.clientHeight*this._options.focusPoint)},_scrollToSourcePosition:function(){throw Error("_scrollToSourcePosition can't be called until _requestWindowScrolls returns.");}}).into}});