define("bitbucket/internal/feature/comments/anchors",["jquery","bitbucket/util/navbuilder","bitbucket/internal/model/page-state"],function(g,f,b){function c(a){a=a||{};this._projectKey=a.projectKey||b.getProject().getKey();this._repoSlug=a.repoSlug||b.getRepository().getSlug();this._pullRequestId=a.pullRequestId||b.getPullRequest().getId()}function d(a){this._path=a.getPath();this._srcPath=a.getSrcPath();this._commitRange=a.getCommitRange();this._projectKey=(a.getRepository()||b).getProject().getKey();
this._repoSlug=(a||b).getRepository().getSlug()}function e(a,h,b,c){this._diffAnchor=a;this._lineType=h;this._line=b;this._fileType=c}c.prototype.getId=function(){return"pullrequest-"+this._projectKey+"-"+this._repoSlug+"-"+this._pullRequestId};c.prototype.toJSON=function(){};c.prototype.urlBuilder=function(){return f.rest().project(this._projectKey).repo(this._repoSlug).pullRequest(this._pullRequestId).comments()};d.prototype.getId=function(){return"diff-"+this._projectKey+"-"+this._repoSlug+"-"+
this._commitRange.getId()+"-"+this._path};d.prototype.toJSON=function(){var a={path:this._path.toString(),commitRange:this._commitRange.toJSON()},b=this._srcPath&&this._srcPath.toString();b&&(a.srcPath=b);return a};d.prototype.urlBuilder=function(){var a=f.rest().project(this._projectKey).repo(this._repoSlug),b=this._commitRange.getPullRequest();return b?a.pullRequest(b.getId()).comments():a.commit(this._commitRange.getUntilRevision().getId()).comments()};e.prototype.getId=function(){var a=this._fileType?
this._fileType+"-":"";return"line-"+this._diffAnchor.getId()+"-"+a+this._lineType+"-"+this._line};e.prototype.toJSON=function(){var a=g.extend(this._diffAnchor.toJSON(),{line:this._line,lineType:this._lineType});this._fileType&&(a.fileType=this._fileType);return a};e.prototype.urlBuilder=function(){return this._diffAnchor.urlBuilder()};return{PullRequestAnchor:c,DiffAnchor:d,LineAnchor:e}});