(function(h){function k(b){return b.replace(/[- _]+/g,"").toLowerCase()}function l(b){for(;4>b.length;)b="0"+b;return b}function m(b){var c=/^\\[xu](.+)/.exec(b);return c?parseInt(c[1],16):b.charCodeAt("\\"===b.charAt(0)?1:0)}function n(b){var c="",a=-1,d;h.forEach(b,/(\\x..|\\u....|\\?[\s\S])(?:-(\\x..|\\u....|\\?[\s\S]))?/,function(b){d=m(b[1]);d>a+1&&(c+="\\u"+l(parseInt(a+1,10).toString(16)),d>a+2&&(c+="-\\u"+l(parseInt(d-1,10).toString(16))));a=m(b[2]||b[1])});65535>a&&(c+="\\u"+l(parseInt(a+
1,10).toString(16)),65534>a&&(c+="-\\uFFFF"));return c}var d={};h.addToken(/\\([pP])(?:{(\^?)([^}]*)}|([A-Za-z]))/,function(b,c,a){var g="P"===b[1]||!!b[2],e=-1<a.indexOf("A");a=k(b[4]||b[3]);var f=d[a];if("P"===b[1]&&b[2])throw new SyntaxError("Invalid double negation "+b[0]);if(!d.hasOwnProperty(a))throw new SyntaxError("Unknown Unicode token "+b[0]);if(f.inverseOf){a=k(f.inverseOf);if(!d.hasOwnProperty(a))throw new ReferenceError("Unicode token missing data "+b[0]+" -\x3e "+f.inverseOf);f=d[a];
g=!g}if(!f.bmp&&!e)throw new SyntaxError("Astral mode required for Unicode token "+b[0]);if(e){if("class"===c)throw new SyntaxError("Astral mode does not support Unicode tokens within character classes");b=g?"a!":"a\x3d";(c=d[a][b])||(c=d[a],a=d[a],e="",a.bmp&&!a.isBmpLast&&(e="["+a.bmp+"]"+(a.astral?"|":"")),a.astral&&(e+=a.astral),a.isBmpLast&&a.bmp&&(e+=(a.astral?"|":"")+"["+a.bmp+"]"),c=c[b]=g?"(?:(?!"+e+")(?:[\ud800-\udbff][\udc00-\udfff]|[\x00-\uffff]))":"(?:"+e+")");return c}return"class"===
c?g?d[a]["b!"]||(d[a]["b!"]=n(d[a].bmp)):f.bmp:(g?"[^":"[")+f.bmp+"]"},{scope:"all",optionalFlags:"A",leadChar:"\\"});h.addUnicodeData=function(b){var c,a;for(a=0;a<b.length;++a){c=b[a];if(!c.name)throw Error("Unicode token requires name");if(!(c.inverseOf||c.bmp||c.astral))throw Error("Unicode token has no character data "+c.name);d[k(c.name)]=c;c.alias&&(d[k(c.alias)]=c)}h.cache.flush("patterns")}})(XRegExp);