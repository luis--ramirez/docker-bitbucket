(function(v){function p(k,b){return(Math.abs(k.r-b.r)+Math.abs(k.g-b.g)+Math.abs(k.b-b.b))/3}var A=1,c={red:255,green:0,blue:255,alpha:255},w={flat:function(k,b){return{r:c.red,g:c.green,b:c.blue,a:c.alpha}},movement:function(k,b){return{r:(c.red/255*b.r+c.red)/2,g:(c.green/255*b.g+c.green)/2,b:(c.blue/255*b.b+c.blue)/2,a:b.a}},flatDifferenceIntensity:function(k,b){return{r:c.red,g:c.green,b:c.blue,a:p(k,b)}},movementDifferenceIntensity:function(k,b){var t=p(k,b)/255*.8;return{r:c.red/255*(1-t)*b.r+
t*c.red,g:c.green/255*(1-t)*b.g+t*c.green,b:c.blue/255*(1-t)*b.b+t*c.blue,a:b.a}}},I=w.flat,B=1200,N=/^https?:\/\//,O=new RegExp("^https?://"+document.domain);v.resemble=function(k){function b(){var a=x.length,d;for(d=0;d<a;d++)if("function"===typeof x[d])x[d](l)}function c(a,d,e){var f,m;for(f=0;f<a;f++)for(m=0;m<d;m++)e(f,m)}function w(a,d,e){var f=0,m=0,k=0,E=0,g=0;c(e,d,function(e,b){var c=4*(e*d+b),h=a[c],C=a[c+1],c=a[c+2];f++;m+=h/255*100;k+=C/255*100;E+=c/255*100;g+=(.3*h+.59*C+.11*c)/255*
100});l.red=Math.floor(m/f);l.green=Math.floor(k/f);l.blue=Math.floor(E/f);l.brightness=Math.floor(g/f);b()}function F(a,d){var e,f=new Image;N.test(a)&&!O.test(a)&&f.setAttribute("crossorigin","anonymous");f.onload=function(){var a=document.createElement("canvas"),e=f.width,c=f.height;a.width=e;a.height=c;a.getContext("2d").drawImage(f,0,0,e,c);a=a.getContext("2d").getImageData(0,0,e,c);g.push(a);d(a,e,c)};if("string"===typeof a){if(f.src=a,f.complete)f.onload()}else"undefined"!==typeof a.data&&
"number"===typeof a.width&&"number"===typeof a.height?(g.push(a),d(a,a.width,a.height)):(e=new FileReader,e.onload=function(a){f.src=a.target.result},e.readAsDataURL(a))}function u(a,d,e){var f=Math.abs(a-d);return"undefined"===typeof a||"undefined"===typeof d?!1:a===d?!0:f<h[e]?!0:!1}function v(a,d){var e=u(a.a,d.a,"alpha");return u(a.brightness,d.brightness,"minBrightness")&&e}function p(a,d,e){a/=255;d/=255;e/=255;var f=Math.max(a,d,e),m=Math.min(a,d,e),c;if(f==m)c=0;else{m=f-m;switch(f){case a:c=
(d-e)/m+(d<e?6:0);break;case d:c=(e-a)/m+2;break;case e:c=(a-d)/m+4}c/=6}return c}function J(a,d,e,f,c,k){var b,g,l,n=0,q=0,r=0;a.h=p(a.r,a.g,a.b);for(g=-1;1>=g;g++)for(l=-1;1>=l;l++)if(0!==g||0!==l)if(b=4*((f+l)*k+(c+g)),b=G(d,b,e),null!==b){y(b);b.h=p(b.r,b.g,b.b);Math.abs(a.brightness-b.brightness)>h.maxBrightness&&n++;var C=a.g===b.g,P=a.b===b.b;a.r===b.r&&C&&P&&r++;.3<Math.abs(b.h-a.h)&&q++;if(1<q||1<n)return!0}return 2>r?!0:!1}function H(a,d,e,f){e=I(e,f);a[d]=e.r;a[d+1]=e.g;a[d+2]=e.b;a[d+
3]=e.a}function K(a,d,e){a[d]=e.brightness;a[d+1]=e.brightness;a[d+2]=e.brightness;a[d+3]=e.a*A}function G(a,d,e){var f,c;e=a[d];return"undefined"!==typeof e?(f=a[d+1],c=a[d+2],a=a[d+3],a={r:e,g:f,b:c,a:a}):null}function y(a){a.brightness=.3*a.r+.59*a.g+.11*a.b}function Q(a,d,e,f){var b=document.createElement("canvas"),g=a.data,k=d.data;b.width=e;b.height=f;var h=b.getContext("2d"),p=h.createImageData(e,f),n=p.data,q=0;a=Date.now();var r;B&&z&&(e>B||f>B)&&(r=6);c(f,e,function(a,f){if(!r||0!==a%r&&
0!==f%r){var d=4*(a*e+f),b=G(g,d,1),c=G(k,d,2);if(null!==b&&null!==c)if(D)y(b),y(c),v(b,c)?K(n,d,c):(H(n,d,b,c),q++);else{var h=u(b.r,c.r,"red"),m=u(b.g,c.g,"green"),l=u(b.b,c.b,"blue"),p=u(b.a,c.a,"alpha");h&&m&&l&&p?(n[d]=b.r,n[d+1]=b.g,n[d+2]=b.b,n[d+3]=b.a*A):z&&(y(b),y(c),J(b,g,1,a,f,e)||J(c,k,2,a,f,e))?v(b,c)?K(n,d,c):(H(n,d,b,c),q++):(H(n,d,b,c),q++)}}});l.misMatchPercentage=(q/(f*e)*100).toFixed(2);l.analysisTime=Date.now()-a;l.getImageDataUrl=function(a){var d=0;a&&(h.font="12px sans-serif",
d=h.measureText(a).width+4,d>b.width&&(b.width=d),b.height+=22,h.fillStyle="#666",h.fillRect(0,0,b.width,18),h.fillStyle="#fff",h.fillRect(0,18,b.width,4),h.fillStyle="#fff",h.textBaseline="top",h.font="12px sans-serif",h.fillText(a,2,1),d=22);h.putImageData(p,0,d);return b.toDataURL("image/png")}}function L(a,d,b){var c;return a.height<b||a.width<d?(c=document.createElement("canvas"),c.width=d,c.height=b,c=c.getContext("2d"),c.putImageData(a,0,0),c.getImageData(0,0,d,b)):a}function R(a,d){function c(){var a,
d;2===g.length&&(a=g[0].width>g[1].width?g[0].width:g[1].width,d=g[0].height>g[1].height?g[0].height:g[1].height,l.isSameDimensions=g[0].width===g[1].width&&g[0].height===g[1].height?!0:!1,l.dimensionDifference={width:g[0].width-g[1].width,height:g[0].height-g[1].height},Q(L(g[0],a,d),L(g[1],a,d),a,d),b())}g=[];F(a,c);F(d,c)}function M(a){var d,b="function"===typeof a;b||(d=a);var c={ignoreNothing:function(){h.red=16;h.green=16;h.blue=16;h.alpha=16;h.minBrightness=16;h.maxBrightness=240;D=z=!1;b&&
a();return c},ignoreAntialiasing:function(){h.red=32;h.green=32;h.blue=32;h.alpha=32;h.minBrightness=64;h.maxBrightness=96;z=!0;D=!1;b&&a();return c},ignoreColors:function(){h.alpha=16;h.minBrightness=16;h.maxBrightness=240;z=!1;D=!0;b&&a();return c},repaint:function(){b&&a();return c},onComplete:function(a){x.push(a);a=function(){R(k,d)};a();return M(a)}};return c}var l={},g=[],x=[],h={red:16,green:16,blue:16,alpha:16,minBrightness:16,maxBrightness:240},z=!1,D=!1;return{onComplete:function(a){x.push(a);
F(k,function(a,b,c){w(a.data,b,c)})},compareTo:function(a){return M(a)}}};v.resemble.outputSettings=function(k){var b;if(k.errorColor)for(b in k.errorColor)c[b]=void 0===k.errorColor[b]?c[b]:k.errorColor[b];k.errorType&&w[k.errorType]&&(I=w[k.errorType]);A=isNaN(Number(k.transparency))?A:k.transparency;void 0!==k.largeImageThreshold&&(B=k.largeImageThreshold);return this}})(this);