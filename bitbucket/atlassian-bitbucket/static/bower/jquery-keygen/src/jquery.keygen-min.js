(function(m,h){m.KeyGenerator=function(){var d="THE A AN AS AND OF OR".split(" "),a={},c=function(a){return h.grep(a,function(a,b){return-1===h.inArray(a,d)})},q=function(a){var e="";h.each(a,function(a,g){e+=g.charAt(0)});return e},n=function(a){var e=!1,b;for(b=0;b<a.length;b++){var c=a[b];if(c&&1===c.length&&-1!==c.search("[AEIOUY]"))e=!0;else if(e)return a.substring(0,b+1)}return a};a[199]="C";a[231]="c";a[252]="u";a[251]="u";a[250]="u";a[249]="u";a[233]="e";a[234]="e";a[235]="e";a[232]="e";a[226]=
"a";a[228]="a";a[224]="a";a[229]="a";a[225]="a";a[239]="i";a[238]="i";a[236]="i";a[237]="i";a[196]="A";a[197]="A";a[201]="E";a[230]="ae";a[198]="Ae";a[244]="o";a[246]="o";a[242]="o";a[243]="o";a[220]="U";a[255]="Y";a[214]="O";a[241]="n";a[209]="N";return{generateKey:function(g,e){e=h.extend({},e);var b="number"==typeof e.desiredKeyLength?e.desiredKeyLength:4,d="number"==typeof e.maxKeyLength?e.maxKeyLength:Infinity;g=h.trim(g);if(!g)return"";for(var k=[],f=0,m=g.length;f<m;f++){var p=a[g.charCodeAt(f)];
k.push(p?p:g[f])}g=k.join("");var l=[];h.each(g.split(/\s+/),function(a,b){b&&(b=b.replace(/[^a-zA-Z]/g,""),b=b.toUpperCase(),b.length&&l.push(b))});b&&l.join("").length>b&&(l=c(l));0==l.length?b="":1==l.length?(k=l[0],f=n(k),b=d<k.length||Math.abs(k.length-b)>=Math.abs(f.length-b)?f:k):(k=l.join("").length,f=q(l),b=d<k||Math.abs(k-b)>=Math.abs(f.length-b)?f:l.join(""));d&&b.length>d&&(b=b.substr(0,d));return b}}};var r=m.KeyGenerator();h.fn.generateFrom=function(d,a){var c=h(this).first();d=d.first();
a=h.extend({},{desiredKeyLength:4,maxKeyLength:10,maxNameLength:30,timeoutMS:100,validationCallback:function(){},errorCallback:function(){}},a);(function(){var m=function(){c.val();c.val()&&c.data("lastGeneratedValue")!==c.val()&&c.data("autosuggest",!1);if(!1!==c.data("autosuggest")){var b=r.generateKey(d.val(),{desiredKeyLength:a.desiredKeyLength,maxKeyLength:a.maxKeyLength});c.data("lastGeneratedValue",b);c.val(b)}},n=function(a){g(a,m)},g=function(b,d){var c=h(b.target),f;f=function(){e(b);d();
c.is(":visible")&&c.data("checkHook",setTimeout(f,a.timeoutMS))};c.data("checkHook")||c.data("checkHook",setTimeout(f,0))},e=function(a){a=h(a.target);clearTimeout(a.data("checkHook"));a.removeData("checkHook")};d.attr("maxlength",a.maxNameLength);c.attr("maxlength",a.maxKeyLength);c.css("text-transform","uppercase");document.activeElement&&document.activeElement===d[0]&&n({target:d[0]});d.focus(n);d.blur(e)})();return this}})(window,jQuery);