(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){b.defineMode("smarty",function(u,m){function e(a,d){n=d;return a}function l(a,d){for(var c=a.string,e=a.pos;;){var f=c.indexOf(k,e),e=f+k.length,b;(b=-1==f)||(b=f+k.length,null==b&&(b=a.pos),b=!(3===q&&"{"==k&&(b==a.string.length||/\s/.test(a.string.charAt(b)))));if(b)break}if(f==a.pos){a.match(k);if(a.eat("*"))return c=
v("comment","*"+p),d.tokenize=c,c(a,d);d.depth++;d.tokenize=r;n="startTag";return"tag"}-1<f&&(a.string=c.slice(0,f));e=h.token(a,d.base);-1<f&&(a.string=c);return e}function r(a,d){if(a.match(p,!0))return 3===q?(d.depth--,0>=d.depth&&(d.tokenize=l)):d.tokenize=l,e("tag",null);if(a.match(k,!0))return d.depth++,e("tag","startTag");var c=a.next();if("$"==c)return a.eatWhile(g.validIdentifier),e("variable-2","variable");if("|"==c)return e("operator","pipe");if("."==c)return e("operator","property");if(g.stringChar.test(c))return d.tokenize=
w(c),e("string","string");if(g.operatorChars.test(c))return a.eatWhile(g.operatorChars),e("operator","operator");if("["==c||"]"==c)return e("bracket","bracket");if("("==c||")"==c)return e("bracket","operator");if(/\d/.test(c))return a.eatWhile(/\d/),e("number","number");if("variable"==d.last){if("@"==c)return a.eatWhile(g.validIdentifier),e("property","property");if("|"==c)return a.eatWhile(g.validIdentifier),e("qualifier","modifier")}else{if("pipe"==d.last)return a.eatWhile(g.validIdentifier),e("qualifier",
"modifier");if("whitespace"==d.last)return a.eatWhile(g.validIdentifier),e("attribute","modifier")}if("property"==d.last)return a.eatWhile(g.validIdentifier),e("property",null);if(/\s/.test(c))return n="whitespace",null;var b="";"/"!=c&&(b+=c);for(var f=null;f=a.eat(g.validIdentifier);)b+=f;for(var f=0,h=t.length;f<h;f++)if(t[f]==b)return e("keyword","keyword");return/\s/.test(c)?null:e("tag","tag")}function w(a){return function(d,c){for(var b=null,e=null;!d.eol();){e=d.peek();if(d.next()==a&&"\\"!==
b){c.tokenize=r;break}b=e}return"string"}}function v(a,d){return function(c,b){for(;!c.eol();){if(c.match(d)){b.tokenize=l;break}c.next()}return a}}var p=m.rightDelimiter||"}",k=m.leftDelimiter||"{",q=m.version||2,h=b.getMode(u,m.baseMode||"null"),t=["debug","extends","function","include","literal"],g={operatorChars:/[+\-*&%=<>!?]/,validIdentifier:/[a-zA-Z0-9_]/,stringChar:/['"]/},n;return{startState:function(){return{base:b.startState(h),tokenize:l,last:null,depth:0}},copyState:function(a){return{base:b.copyState(h,
a.base),tokenize:a.tokenize,last:a.last,depth:a.depth}},innerMode:function(a){if(a.tokenize==l)return{mode:h,state:a.base}},token:function(a,b){var c=b.tokenize(a,b);b.last=n;return c},indent:function(a,d){return a.tokenize==l&&h.indent?h.indent(a.base,d):b.Pass},blockCommentStart:k+"*",blockCommentEnd:"*"+p}});b.defineMIME("text/x-smarty","smarty")});